
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="PII anonymization for text and images.">
      
      
        <meta name="author" content="Microsoft">
      
      
        <link rel="canonical" href="https://microsoft.github.io/presidio/api/analyzer_python/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../anonymizer_python/">
      
      
      <link rel="icon" href="../../assets/ms_icon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.4">
    
    
      
        <title>Presidio Analyzer Python API - Microsoft Presidio</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "5pd40fk720");
</script>

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#presidio-analyzer-api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Microsoft Presidio" class="md-header__button md-logo" aria-label="Microsoft Presidio" data-md-component="logo">
      
  <img src="../../assets/ms_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Microsoft Presidio
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Presidio Analyzer Python API
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/microsoft/presidio/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Microsoft Presidio" class="md-nav__button md-logo" aria-label="Microsoft Presidio" data-md-component="logo">
      
  <img src="../../assets/ms_icon.png" alt="logo">

    </a>
    Microsoft Presidio
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/microsoft/presidio/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Handling text
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Handling text
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../text_anonymization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Step by step tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Step by step tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/00_getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/01_deny_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deny-list recognizers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/02_regex/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Regex recognizers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/03_rule_based/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rule-based recognizers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/05_languages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Additional models/languages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/04_external_services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/06_context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Context enhancement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/07_decision_process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decision process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/08_no_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    No-code recognizers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/09_ad_hoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ad-hoc recognizers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/10_simple_anonymization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Simple anonymization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/11_custom_anonymization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom anonymization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/12_encryption/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encryption/Decryption
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/13_allow_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Allow-lists
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Presidio Analyzer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Presidio Analyzer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developing PII recognizers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_2">
            <span class="md-nav__icon md-icon"></span>
            Developing PII recognizers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/adding_recognizers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/developing_recognizers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best practices in developing recognizers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/languages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-language support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4" >
        
          
          <label class="md-nav__link" for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Customizing the NLP model
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            Customizing the NLP model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/customizing_nlp_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/nlp_engines/spacy_stanza/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spacy/Stanza
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/nlp_engines/transformers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../analyzer/decision_process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tracing the decision process
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Presidio Anonymizer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Presidio Anonymizer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../anonymizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../anonymizer/adding_operators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing PII operators
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Handling images
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Handling images
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../image-redactor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../image-redactor/evaluating_dicom_redaction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluating DICOM redaction
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Samples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    General
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            General
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../supported_entities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supported entities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" checked>
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development and design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Development and design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up a development environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build_release/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Build and release process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../presidio_V2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changes from V1 to V2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2_5" checked>
        
          
          <label class="md-nav__link" for="__nav_7_2_5" id="__nav_7_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python API reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_2_5">
            <span class="md-nav__icon md-icon"></span>
            Python API reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Presidio Analyzer Python API
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Presidio Analyzer Python API
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      presidio_analyzer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation" class="md-nav__link">
    <span class="md-ellipsis">
      AnalysisExplanation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnalysisExplanation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.append_textual_explanation_line" class="md-nav__link">
    <span class="md-ellipsis">
      append_textual_explanation_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.set_improved_score" class="md-nav__link">
    <span class="md-ellipsis">
      set_improved_score
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.set_supportive_context_word" class="md-nav__link">
    <span class="md-ellipsis">
      set_supportive_context_word
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine" class="md-nav__link">
    <span class="md-ellipsis">
      AnalyzerEngine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnalyzerEngine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.__add_recognizer_id_if_not_exists" class="md-nav__link">
    <span class="md-ellipsis">
      __add_recognizer_id_if_not_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.__remove_decision_process" class="md-nav__link">
    <span class="md-ellipsis">
      __remove_decision_process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.__remove_low_scores" class="md-nav__link">
    <span class="md-ellipsis">
      __remove_low_scores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
    <nav class="md-nav" aria-label="analyze">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze--set-up-the-engine-loads-the-nlp-module-spacy-model-by-default" class="md-nav__link">
    <span class="md-ellipsis">
      Set up the engine, loads the NLP module (spaCy model by default)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze--and-other-pii-recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      and other PII recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze--call-analyzer-to-get-results" class="md-nav__link">
    <span class="md-ellipsis">
      Call analyzer to get results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.get_recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      get_recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.get_supported_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_entities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerRequest" class="md-nav__link">
    <span class="md-ellipsis">
      AnalyzerRequest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.BatchAnalyzerEngine" class="md-nav__link">
    <span class="md-ellipsis">
      BatchAnalyzerEngine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BatchAnalyzerEngine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.BatchAnalyzerEngine.analyze_dict" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.BatchAnalyzerEngine.analyze_iterator" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_iterator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.ContextAwareEnhancer" class="md-nav__link">
    <span class="md-ellipsis">
      ContextAwareEnhancer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContextAwareEnhancer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.ContextAwareEnhancer.enhance_using_context" class="md-nav__link">
    <span class="md-ellipsis">
      enhance_using_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.DictAnalyzerResult" class="md-nav__link">
    <span class="md-ellipsis">
      DictAnalyzerResult
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      EntityRecognizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EntityRecognizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.enhance_using_context" class="md-nav__link">
    <span class="md-ellipsis">
      enhance_using_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.get_supported_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.get_supported_language" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.get_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.remove_duplicates" class="md-nav__link">
    <span class="md-ellipsis">
      remove_duplicates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.LemmaContextAwareEnhancer" class="md-nav__link">
    <span class="md-ellipsis">
      LemmaContextAwareEnhancer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LemmaContextAwareEnhancer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.LemmaContextAwareEnhancer.enhance_using_context" class="md-nav__link">
    <span class="md-ellipsis">
      enhance_using_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.LocalRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      LocalRecognizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      PatternRecognizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PatternRecognizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.__analyze_patterns" class="md-nav__link">
    <span class="md-ellipsis">
      __analyze_patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.build_regex_explanation" class="md-nav__link">
    <span class="md-ellipsis">
      build_regex_explanation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.invalidate_result" class="md-nav__link">
    <span class="md-ellipsis">
      invalidate_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.validate_result" class="md-nav__link">
    <span class="md-ellipsis">
      validate_result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      RecognizerRegistry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecognizerRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.__instantiate_recognizer" class="md-nav__link">
    <span class="md-ellipsis">
      __instantiate_recognizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.add_pattern_recognizer_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      add_pattern_recognizer_from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.add_recognizer" class="md-nav__link">
    <span class="md-ellipsis">
      add_recognizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.add_recognizers_from_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      add_recognizers_from_yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.get_recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      get_recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.get_supported_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.load_predefined_recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      load_predefined_recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.remove_recognizer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_recognizer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult" class="md-nav__link">
    <span class="md-ellipsis">
      RecognizerResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecognizerResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__gt__" class="md-nav__link">
    <span class="md-ellipsis">
      __gt__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.append_analysis_explanation_text" class="md-nav__link">
    <span class="md-ellipsis">
      append_analysis_explanation_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.contained_in" class="md-nav__link">
    <span class="md-ellipsis">
      contained_in
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.contains" class="md-nav__link">
    <span class="md-ellipsis">
      contains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.equal_indices" class="md-nav__link">
    <span class="md-ellipsis">
      equal_indices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.has_conflict" class="md-nav__link">
    <span class="md-ellipsis">
      has_conflict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.intersects" class="md-nav__link">
    <span class="md-ellipsis">
      intersects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.RemoteRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      RemoteRecognizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RemoteRecognizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RemoteRecognizer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../anonymizer_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presidio Anonymizer Python API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../image_redactor_python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Presidio Image Redactor Python API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://microsoft.github.io/presidio/api-docs/api-docs.html" target="_blank" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://huggingface.co/spaces/presidio/presidio_demo" target="_blank" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Demo
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer" class="md-nav__link">
    <span class="md-ellipsis">
      presidio_analyzer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation" class="md-nav__link">
    <span class="md-ellipsis">
      AnalysisExplanation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnalysisExplanation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.append_textual_explanation_line" class="md-nav__link">
    <span class="md-ellipsis">
      append_textual_explanation_line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.set_improved_score" class="md-nav__link">
    <span class="md-ellipsis">
      set_improved_score
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.set_supportive_context_word" class="md-nav__link">
    <span class="md-ellipsis">
      set_supportive_context_word
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalysisExplanation.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine" class="md-nav__link">
    <span class="md-ellipsis">
      AnalyzerEngine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AnalyzerEngine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.__add_recognizer_id_if_not_exists" class="md-nav__link">
    <span class="md-ellipsis">
      __add_recognizer_id_if_not_exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.__remove_decision_process" class="md-nav__link">
    <span class="md-ellipsis">
      __remove_decision_process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.__remove_low_scores" class="md-nav__link">
    <span class="md-ellipsis">
      __remove_low_scores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
    <nav class="md-nav" aria-label="analyze">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze--set-up-the-engine-loads-the-nlp-module-spacy-model-by-default" class="md-nav__link">
    <span class="md-ellipsis">
      Set up the engine, loads the NLP module (spaCy model by default)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze--and-other-pii-recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      and other PII recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.analyze--call-analyzer-to-get-results" class="md-nav__link">
    <span class="md-ellipsis">
      Call analyzer to get results
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.get_recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      get_recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerEngine.get_supported_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_entities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.AnalyzerRequest" class="md-nav__link">
    <span class="md-ellipsis">
      AnalyzerRequest
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.BatchAnalyzerEngine" class="md-nav__link">
    <span class="md-ellipsis">
      BatchAnalyzerEngine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BatchAnalyzerEngine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.BatchAnalyzerEngine.analyze_dict" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.BatchAnalyzerEngine.analyze_iterator" class="md-nav__link">
    <span class="md-ellipsis">
      analyze_iterator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.ContextAwareEnhancer" class="md-nav__link">
    <span class="md-ellipsis">
      ContextAwareEnhancer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ContextAwareEnhancer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.ContextAwareEnhancer.enhance_using_context" class="md-nav__link">
    <span class="md-ellipsis">
      enhance_using_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.DictAnalyzerResult" class="md-nav__link">
    <span class="md-ellipsis">
      DictAnalyzerResult
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      EntityRecognizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EntityRecognizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.enhance_using_context" class="md-nav__link">
    <span class="md-ellipsis">
      enhance_using_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.get_supported_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.get_supported_language" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.get_version" class="md-nav__link">
    <span class="md-ellipsis">
      get_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.load" class="md-nav__link">
    <span class="md-ellipsis">
      load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.remove_duplicates" class="md-nav__link">
    <span class="md-ellipsis">
      remove_duplicates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.EntityRecognizer.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.LemmaContextAwareEnhancer" class="md-nav__link">
    <span class="md-ellipsis">
      LemmaContextAwareEnhancer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LemmaContextAwareEnhancer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.LemmaContextAwareEnhancer.enhance_using_context" class="md-nav__link">
    <span class="md-ellipsis">
      enhance_using_context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.LocalRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      LocalRecognizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern" class="md-nav__link">
    <span class="md-ellipsis">
      Pattern
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pattern">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.Pattern.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      PatternRecognizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PatternRecognizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.__analyze_patterns" class="md-nav__link">
    <span class="md-ellipsis">
      __analyze_patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.build_regex_explanation" class="md-nav__link">
    <span class="md-ellipsis">
      build_regex_explanation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.invalidate_result" class="md-nav__link">
    <span class="md-ellipsis">
      invalidate_result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.PatternRecognizer.validate_result" class="md-nav__link">
    <span class="md-ellipsis">
      validate_result
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      RecognizerRegistry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecognizerRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.__instantiate_recognizer" class="md-nav__link">
    <span class="md-ellipsis">
      __instantiate_recognizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.add_pattern_recognizer_from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      add_pattern_recognizer_from_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.add_recognizer" class="md-nav__link">
    <span class="md-ellipsis">
      add_recognizer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.add_recognizers_from_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      add_recognizers_from_yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.get_recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      get_recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.get_supported_entities" class="md-nav__link">
    <span class="md-ellipsis">
      get_supported_entities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.load_predefined_recognizers" class="md-nav__link">
    <span class="md-ellipsis">
      load_predefined_recognizers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerRegistry.remove_recognizer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_recognizer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult" class="md-nav__link">
    <span class="md-ellipsis">
      RecognizerResult
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RecognizerResult">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      __eq__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__gt__" class="md-nav__link">
    <span class="md-ellipsis">
      __gt__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      __hash__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__repr__" class="md-nav__link">
    <span class="md-ellipsis">
      __repr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.append_analysis_explanation_text" class="md-nav__link">
    <span class="md-ellipsis">
      append_analysis_explanation_text
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.contained_in" class="md-nav__link">
    <span class="md-ellipsis">
      contained_in
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.contains" class="md-nav__link">
    <span class="md-ellipsis">
      contains
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.equal_indices" class="md-nav__link">
    <span class="md-ellipsis">
      equal_indices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.from_json" class="md-nav__link">
    <span class="md-ellipsis">
      from_json
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.has_conflict" class="md-nav__link">
    <span class="md-ellipsis">
      has_conflict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.intersects" class="md-nav__link">
    <span class="md-ellipsis">
      intersects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RecognizerResult.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      to_dict
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#presidio_analyzer.RemoteRecognizer" class="md-nav__link">
    <span class="md-ellipsis">
      RemoteRecognizer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RemoteRecognizer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presidio_analyzer.RemoteRecognizer.analyze" class="md-nav__link">
    <span class="md-ellipsis">
      analyze
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  


<h1 id="presidio-analyzer-api-reference">Presidio Analyzer API Reference</h1>


<div class="doc doc-object doc-module">



<a id="presidio_analyzer"></a>
  <div class="doc doc-contents first">
  
      <p>Presidio analyzer package.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.AnalysisExplanation" class="doc doc-heading">
          <code>AnalysisExplanation</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Hold tracing information to explain why PII entities were identified as such.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recognizer</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>name of recognizer that made the decision</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>original_score</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>recognizer's confidence in result</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>pattern_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>name of pattern (if decision was made by a PatternRecognizer)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>pattern</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>regex pattern that was applied (if PatternRecognizer)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>validation_result</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>result of a validation (e.g. checksum)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>textual_explanation</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Free text for describing a decision of a logic or model</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/analysis_explanation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AnalysisExplanation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hold tracing information to explain why PII entities were identified as such.</span>

<span class="sd">    :param recognizer: name of recognizer that made the decision</span>
<span class="sd">    :param original_score: recognizer&#39;s confidence in result</span>
<span class="sd">    :param pattern_name: name of pattern</span>
<span class="sd">            (if decision was made by a PatternRecognizer)</span>
<span class="sd">    :param pattern: regex pattern that was applied (if PatternRecognizer)</span>
<span class="sd">    :param validation_result: result of a validation (e.g. checksum)</span>
<span class="sd">    :param textual_explanation: Free text for describing</span>
<span class="sd">            a decision of a logic or model</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">recognizer</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">original_score</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">pattern_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">validation_result</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">textual_explanation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">regex_flags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recognizer</span> <span class="o">=</span> <span class="n">recognizer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern_name</span> <span class="o">=</span> <span class="n">pattern_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span> <span class="o">=</span> <span class="n">pattern</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_score</span> <span class="o">=</span> <span class="n">original_score</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">original_score</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span> <span class="o">=</span> <span class="n">textual_explanation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_context_improvement</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supportive_context_word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validation_result</span> <span class="o">=</span> <span class="n">validation_result</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regex_flags</span> <span class="o">=</span> <span class="n">regex_flags</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create string representation of the object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_improved_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">score</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the score and calculate the difference from the original score.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">score</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_context_improvement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_score</span>

    <span class="k">def</span> <span class="nf">set_supportive_context_word</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the context word which helped increase the score.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">supportive_context_word</span> <span class="o">=</span> <span class="n">word</span>

    <span class="k">def</span> <span class="nf">append_textual_explanation_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append a new line to textual_explanation field.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span> <span class="o">=</span> <span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize self to dictionary.</span>

<span class="sd">        :return: a dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalysisExplanation.__repr__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create string representation of the object.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analysis_explanation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create string representation of the object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalysisExplanation.append_textual_explanation_line" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">append_textual_explanation_line</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Append a new line to textual_explanation field.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analysis_explanation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">append_textual_explanation_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append a new line to textual_explanation field.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span> <span class="o">=</span> <span class="n">text</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textual_explanation</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalysisExplanation.set_improved_score" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">set_improved_score</span><span class="p">(</span><span class="n">score</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update the score and calculate the difference from the original score.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analysis_explanation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_improved_score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">score</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the score and calculate the difference from the original score.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">score</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">score_context_improvement</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_score</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalysisExplanation.set_supportive_context_word" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">set_supportive_context_word</span><span class="p">(</span><span class="n">word</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Set the context word which helped increase the score.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analysis_explanation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_supportive_context_word</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the context word which helped increase the score.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">supportive_context_word</span> <span class="o">=</span> <span class="n">word</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalysisExplanation.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Serialize self to dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analysis_explanation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize self to dictionary.</span>

<span class="sd">    :return: a dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.AnalyzerEngine" class="doc doc-heading">
          <code>AnalyzerEngine</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Entry point for Presidio Analyzer.</p>
<p>Orchestrating the detection of PII entities and all related logic.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>registry</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerRegistry" href="#presidio_analyzer.RecognizerRegistry">RecognizerRegistry</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>instance of type RecognizerRegistry</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>nlp_engine</code></td>
          <td>
                <code><span title="presidio_analyzer.nlp_engine.NlpEngine">NlpEngine</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>instance of type NlpEngine (for example SpacyNlpEngine)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>app_tracer</code></td>
          <td>
                <code><span title="presidio_analyzer.app_tracer.AppTracer">AppTracer</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>instance of type AppTracer, used to trace the logic used during each request for interpretability reasons.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>log_decision_process</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>bool, defines whether the decision process within the analyzer should be logged or not.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>default_score_threshold</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Minimum confidence value for detected entities to be returned</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>supported_languages</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of possible languages this engine could be run on. Used for loading the right NLP models and recognizers for these languages.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>context_aware_enhancer</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.context_aware_enhancers.ContextAwareEnhancer" href="#presidio_analyzer.ContextAwareEnhancer">ContextAwareEnhancer</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>instance of type ContextAwareEnhancer for enhancing confidence score based on context words, (LemmaContextAwareEnhancer will be created by default if None passed)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/analyzer_engine.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AnalyzerEngine</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Entry point for Presidio Analyzer.</span>

<span class="sd">    Orchestrating the detection of PII entities and all related logic.</span>

<span class="sd">    :param registry: instance of type RecognizerRegistry</span>
<span class="sd">    :param nlp_engine: instance of type NlpEngine</span>
<span class="sd">    (for example SpacyNlpEngine)</span>
<span class="sd">    :param app_tracer: instance of type AppTracer, used to trace the logic</span>
<span class="sd">    used during each request for interpretability reasons.</span>
<span class="sd">    :param log_decision_process: bool,</span>
<span class="sd">    defines whether the decision process within the analyzer should be logged or not.</span>
<span class="sd">    :param default_score_threshold: Minimum confidence value</span>
<span class="sd">    for detected entities to be returned</span>
<span class="sd">    :param supported_languages: List of possible languages this engine could be run on.</span>
<span class="sd">    Used for loading the right NLP models and recognizers for these languages.</span>
<span class="sd">    :param context_aware_enhancer: instance of type ContextAwareEnhancer for enhancing</span>
<span class="sd">    confidence score based on context words, (LemmaContextAwareEnhancer will be created</span>
<span class="sd">    by default if None passed)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">registry</span><span class="p">:</span> <span class="n">RecognizerRegistry</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">nlp_engine</span><span class="p">:</span> <span class="n">NlpEngine</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">app_tracer</span><span class="p">:</span> <span class="n">AppTracer</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">log_decision_process</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">default_score_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">supported_languages</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">context_aware_enhancer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ContextAwareEnhancer</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">supported_languages</span><span class="p">:</span>
            <span class="n">supported_languages</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;en&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">nlp_engine</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;nlp_engine not provided, creating default.&quot;</span><span class="p">)</span>
            <span class="n">provider</span> <span class="o">=</span> <span class="n">NlpEngineProvider</span><span class="p">()</span>
            <span class="n">nlp_engine</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="n">create_engine</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">registry</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;registry not provided, creating default.&quot;</span><span class="p">)</span>
            <span class="n">registry</span> <span class="o">=</span> <span class="n">RecognizerRegistry</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">app_tracer</span><span class="p">:</span>
            <span class="n">app_tracer</span> <span class="o">=</span> <span class="n">AppTracer</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_tracer</span> <span class="o">=</span> <span class="n">app_tracer</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">supported_languages</span> <span class="o">=</span> <span class="n">supported_languages</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">nlp_engine</span> <span class="o">=</span> <span class="n">nlp_engine</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">is_loaded</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">registry</span> <span class="o">=</span> <span class="n">registry</span>

        <span class="c1"># load all recognizers</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">registry</span><span class="o">.</span><span class="n">recognizers</span><span class="p">:</span>
            <span class="n">registry</span><span class="o">.</span><span class="n">load_predefined_recognizers</span><span class="p">(</span>
                <span class="n">nlp_engine</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nlp_engine</span><span class="p">,</span> <span class="n">languages</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_languages</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log_decision_process</span> <span class="o">=</span> <span class="n">log_decision_process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_score_threshold</span> <span class="o">=</span> <span class="n">default_score_threshold</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">context_aware_enhancer</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;context aware enhancer not provided, creating default&quot;</span>
                <span class="o">+</span> <span class="s2">&quot; lemma based enhancer.&quot;</span>
            <span class="p">)</span>
            <span class="n">context_aware_enhancer</span> <span class="o">=</span> <span class="n">LemmaContextAwareEnhancer</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">context_aware_enhancer</span> <span class="o">=</span> <span class="n">context_aware_enhancer</span>

    <span class="k">def</span> <span class="nf">get_recognizers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of PII recognizers currently loaded.</span>

<span class="sd">        :param language: Return the recognizers supporting a given language.</span>
<span class="sd">        :return: List of [Recognizer] as a RecognizersAllResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
            <span class="n">languages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_languages</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">languages</span> <span class="o">=</span> <span class="p">[</span><span class="n">language</span><span class="p">]</span>

        <span class="n">recognizers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">language</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetching all recognizers for language </span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">all_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">recognizers</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_supported_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of the entities that can be detected.</span>

<span class="sd">        :param language: Return only entities supported in a specific language.</span>
<span class="sd">        :return: List of entity names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">recognizers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">)</span>
        <span class="n">supported_entities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">:</span>
            <span class="n">supported_entities</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">recognizer</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">())</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">supported_entities</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">correlation_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">score_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">return_decision_process</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ad_hoc_recognizers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">allow_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NlpArtifacts</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find PII entities in text using different PII recognizers for a given language.</span>

<span class="sd">        :param text: the text to analyze</span>
<span class="sd">        :param language: the language of the text</span>
<span class="sd">        :param entities: List of PII entities that should be looked for in the text.</span>
<span class="sd">        If entities=None then all entities are looked for.</span>
<span class="sd">        :param correlation_id: cross call ID for this request</span>
<span class="sd">        :param score_threshold: A minimum value for which</span>
<span class="sd">        to return an identified entity</span>
<span class="sd">        :param return_decision_process: Whether the analysis decision process steps</span>
<span class="sd">        returned in the response.</span>
<span class="sd">        :param ad_hoc_recognizers: List of recognizers which will be used only</span>
<span class="sd">        for this specific request.</span>
<span class="sd">        :param context: List of context words to enhance confidence score if matched</span>
<span class="sd">        with the recognized entity&#39;s recognizer context</span>
<span class="sd">        :param allow_list: List of words that the user defines as being allowed to keep</span>
<span class="sd">        in the text</span>
<span class="sd">        :param nlp_artifacts: precomputed NlpArtifacts</span>
<span class="sd">        :return: an array of the found entities in the text</span>

<span class="sd">        :example:</span>

<span class="sd">        &gt;&gt;&gt; from presidio_analyzer import AnalyzerEngine</span>

<span class="sd">        &gt;&gt;&gt; # Set up the engine, loads the NLP module (spaCy model by default)</span>
<span class="sd">        &gt;&gt;&gt; # and other PII recognizers</span>
<span class="sd">        &gt;&gt;&gt; analyzer = AnalyzerEngine()</span>

<span class="sd">        &gt;&gt;&gt; # Call analyzer to get results</span>
<span class="sd">        &gt;&gt;&gt; results = analyzer.analyze(text=&#39;My phone number is 212-555-5555&#39;, entities=[&#39;PHONE_NUMBER&#39;], language=&#39;en&#39;) # noqa D501</span>
<span class="sd">        &gt;&gt;&gt; print(results)</span>
<span class="sd">        [type: PHONE_NUMBER, start: 19, end: 31, score: 0.85]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_fields</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">entities</span>

        <span class="n">recognizers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span>
            <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">entities</span><span class="p">,</span>
            <span class="n">all_fields</span><span class="o">=</span><span class="n">all_fields</span><span class="p">,</span>
            <span class="n">ad_hoc_recognizers</span><span class="o">=</span><span class="n">ad_hoc_recognizers</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">all_fields</span><span class="p">:</span>
            <span class="c1"># Since all_fields=True, list all entities by iterating</span>
            <span class="c1"># over all recognizers</span>
            <span class="n">entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">)</span>

        <span class="c1"># run the nlp pipeline over the given text, store the results in</span>
        <span class="c1"># a NlpArtifacts instance</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nlp_artifacts</span><span class="p">:</span>
            <span class="n">nlp_artifacts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">process_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_decision_process</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">app_tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span>
                <span class="n">correlation_id</span><span class="p">,</span> <span class="s2">&quot;nlp artifacts:&quot;</span> <span class="o">+</span> <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
            <span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">:</span>
            <span class="c1"># Lazy loading of the relevant recognizers</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">is_loaded</span><span class="p">:</span>
                <span class="n">recognizer</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
                <span class="n">recognizer</span><span class="o">.</span><span class="n">is_loaded</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="c1"># analyze using the current recognizer and append the results</span>
            <span class="n">current_results</span> <span class="o">=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">entities</span><span class="o">=</span><span class="n">entities</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">current_results</span><span class="p">:</span>
                <span class="c1"># add recognizer name to recognition metadata inside results</span>
                <span class="c1"># if not exists</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__add_recognizer_id_if_not_exists</span><span class="p">(</span><span class="n">current_results</span><span class="p">,</span> <span class="n">recognizer</span><span class="p">)</span>
                <span class="n">results</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">current_results</span><span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enhance_using_context</span><span class="p">(</span>
            <span class="n">text</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">recognizers</span><span class="p">,</span> <span class="n">context</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_decision_process</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">app_tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span>
                <span class="n">correlation_id</span><span class="p">,</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]),</span>
            <span class="p">)</span>

        <span class="c1"># Remove duplicates or low score results</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">remove_duplicates</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__remove_low_scores</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">score_threshold</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">allow_list</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_allow_list</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">allow_list</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">return_decision_process</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__remove_decision_process</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">_enhance_using_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">raw_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
        <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span>
        <span class="n">recognizers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">],</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enhance confidence score using context words.</span>

<span class="sd">        :param text: The actual text that was analyzed</span>
<span class="sd">        :param raw_results: Recognizer results which didn&#39;t take</span>
<span class="sd">                            context into consideration</span>
<span class="sd">        :param nlp_artifacts: The nlp artifacts contains elements</span>
<span class="sd">                              such as lemmatized tokens for better</span>
<span class="sd">                              accuracy of the context enhancement process</span>
<span class="sd">        :param recognizers: the list of recognizers</span>
<span class="sd">        :param context: list of context words</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">:</span>
            <span class="n">recognizer_results</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">r</span>
                <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">raw_results</span>
                <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span><span class="p">]</span>
                <span class="o">==</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">id</span>
            <span class="p">]</span>
            <span class="n">other_recognizer_results</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">r</span>
                <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">raw_results</span>
                <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span><span class="p">]</span>
                <span class="o">!=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">id</span>
            <span class="p">]</span>

            <span class="c1"># enhance score using context in recognizer level if implemented</span>
            <span class="n">recognizer_results</span> <span class="o">=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">enhance_using_context</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
                <span class="c1"># each recognizer will get access to all recognizer results</span>
                <span class="c1"># to allow related entities contex enhancement</span>
                <span class="n">raw_recognizer_results</span><span class="o">=</span><span class="n">recognizer_results</span><span class="p">,</span>
                <span class="n">other_raw_recognizer_results</span><span class="o">=</span><span class="n">other_recognizer_results</span><span class="p">,</span>
                <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span><span class="p">,</span>
                <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">results</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">recognizer_results</span><span class="p">)</span>

        <span class="c1"># Update results in case surrounding words or external context are relevant to</span>
        <span class="c1"># the context words.</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_aware_enhancer</span><span class="o">.</span><span class="n">enhance_using_context</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">raw_results</span><span class="o">=</span><span class="n">results</span><span class="p">,</span>
            <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span><span class="p">,</span>
            <span class="n">recognizers</span><span class="o">=</span><span class="n">recognizers</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">__remove_low_scores</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span> <span class="n">score_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove results for which the confidence is lower than the threshold.</span>

<span class="sd">        :param results: List of RecognizerResult</span>
<span class="sd">        :param score_threshold: float value for minimum possible confidence</span>
<span class="sd">        :return: List[RecognizerResult]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">score_threshold</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">score_threshold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_score_threshold</span>

        <span class="n">new_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">&gt;=</span> <span class="n">score_threshold</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">new_results</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_remove_allow_list</span><span class="p">(</span>
        <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span> <span class="n">allow_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove results which are part of the allow list.</span>

<span class="sd">        :param results: List of RecognizerResult</span>
<span class="sd">        :param allow_list: list of allowed terms</span>
<span class="sd">        :param text: the text to analyze</span>
<span class="sd">        :return: List[RecognizerResult]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">start</span> <span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">end</span><span class="p">]</span>
            <span class="c1"># if the word is not specified to be allowed, keep in the PII entities</span>
            <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allow_list</span><span class="p">:</span>
                <span class="n">new_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">new_results</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__add_recognizer_id_if_not_exists</span><span class="p">(</span>
        <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span> <span class="n">recognizer</span><span class="p">:</span> <span class="n">EntityRecognizer</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure recognition metadata with recognizer id existence.</span>

<span class="sd">        Ensure recognizer result list contains recognizer id inside recognition</span>
<span class="sd">        metadata dictionary, and if not create it. recognizer_id is needed</span>
<span class="sd">        for context aware enhancement.</span>

<span class="sd">        :param results: List of RecognizerResult</span>
<span class="sd">        :param recognizer: Entity recognizer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
                <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span>
            <span class="p">):</span>
                <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span>
                    <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">id</span>
            <span class="k">if</span> <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_NAME_KEY</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span>
                    <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_NAME_KEY</span>
                <span class="p">]</span> <span class="o">=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">__remove_decision_process</span><span class="p">(</span>
        <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove decision process / analysis explanation from response.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">analysis_explanation</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalyzerEngine.__add_recognizer_id_if_not_exists" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">__add_recognizer_id_if_not_exists</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">recognizer</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Ensure recognition metadata with recognizer id existence.</p>
<p>Ensure recognizer result list contains recognizer id inside recognition
metadata dictionary, and if not create it. recognizer_id is needed
for context aware enhancement.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>results</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of RecognizerResult</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recognizer</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Entity recognizer</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">__add_recognizer_id_if_not_exists</span><span class="p">(</span>
    <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span> <span class="n">recognizer</span><span class="p">:</span> <span class="n">EntityRecognizer</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure recognition metadata with recognizer id existence.</span>

<span class="sd">    Ensure recognizer result list contains recognizer id inside recognition</span>
<span class="sd">    metadata dictionary, and if not create it. recognizer_id is needed</span>
<span class="sd">    for context aware enhancement.</span>

<span class="sd">    :param results: List of RecognizerResult</span>
<span class="sd">    :param recognizer: Entity recognizer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
            <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span>
        <span class="p">):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span>
                <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">id</span>
        <span class="k">if</span> <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_NAME_KEY</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span>
                <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_NAME_KEY</span>
            <span class="p">]</span> <span class="o">=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalyzerEngine.__remove_decision_process" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">__remove_decision_process</span><span class="p">(</span><span class="n">results</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Remove decision process / analysis explanation from response.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">__remove_decision_process</span><span class="p">(</span>
    <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Remove decision process / analysis explanation from response.&quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">analysis_explanation</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalyzerEngine.__remove_low_scores" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">__remove_low_scores</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">score_threshold</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Remove results for which the confidence is lower than the threshold.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>results</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of RecognizerResult</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>score_threshold</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>float value for minimum possible confidence</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List[RecognizerResult]</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__remove_low_scores</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span> <span class="n">score_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove results for which the confidence is lower than the threshold.</span>

<span class="sd">    :param results: List of RecognizerResult</span>
<span class="sd">    :param score_threshold: float value for minimum possible confidence</span>
<span class="sd">    :return: List[RecognizerResult]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">score_threshold</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">score_threshold</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_score_threshold</span>

    <span class="n">new_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">&gt;=</span> <span class="n">score_threshold</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">new_results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalyzerEngine.analyze" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">analyze</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">entities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">correlation_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">score_threshold</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_decision_process</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ad_hoc_recognizers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allow_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Find PII entities in text using different PII recognizers for a given language.</p>
<p>:example:</p>
<blockquote>
<blockquote>
<blockquote>
<p>from presidio_analyzer import AnalyzerEngine</p>
<h4 id="presidio_analyzer.AnalyzerEngine.analyze--set-up-the-engine-loads-the-nlp-module-spacy-model-by-default">Set up the engine, loads the NLP module (spaCy model by default)</h4>
<h4 id="presidio_analyzer.AnalyzerEngine.analyze--and-other-pii-recognizers">and other PII recognizers</h4>
<p>analyzer = AnalyzerEngine()</p>
<h4 id="presidio_analyzer.AnalyzerEngine.analyze--call-analyzer-to-get-results">Call analyzer to get results</h4>
<p>results = analyzer.analyze(text='My phone number is 212-555-5555', entities=['PHONE_NUMBER'], language='en') # noqa D501
print(results)
[type: PHONE_NUMBER, start: 19, end: 31, score: 0.85]</p>
</blockquote>
</blockquote>
</blockquote>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the text to analyze</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>language</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the language of the text</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>entities</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of PII entities that should be looked for in the text. If entities=None then all entities are looked for.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>correlation_id</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>cross call ID for this request</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>score_threshold</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A minimum value for which to return an identified entity</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>return_decision_process</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether the analysis decision process steps returned in the response.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>ad_hoc_recognizers</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of recognizers which will be used only for this specific request.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of context words to enhance confidence score if matched with the recognized entity's recognizer context</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_list</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of words that the user defines as being allowed to keep in the text</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>nlp_artifacts</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="presidio_analyzer.nlp_engine.NlpArtifacts">NlpArtifacts</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>precomputed NlpArtifacts</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>an array of the found entities in the text</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">entities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">correlation_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">score_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">return_decision_process</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">ad_hoc_recognizers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">allow_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NlpArtifacts</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find PII entities in text using different PII recognizers for a given language.</span>

<span class="sd">    :param text: the text to analyze</span>
<span class="sd">    :param language: the language of the text</span>
<span class="sd">    :param entities: List of PII entities that should be looked for in the text.</span>
<span class="sd">    If entities=None then all entities are looked for.</span>
<span class="sd">    :param correlation_id: cross call ID for this request</span>
<span class="sd">    :param score_threshold: A minimum value for which</span>
<span class="sd">    to return an identified entity</span>
<span class="sd">    :param return_decision_process: Whether the analysis decision process steps</span>
<span class="sd">    returned in the response.</span>
<span class="sd">    :param ad_hoc_recognizers: List of recognizers which will be used only</span>
<span class="sd">    for this specific request.</span>
<span class="sd">    :param context: List of context words to enhance confidence score if matched</span>
<span class="sd">    with the recognized entity&#39;s recognizer context</span>
<span class="sd">    :param allow_list: List of words that the user defines as being allowed to keep</span>
<span class="sd">    in the text</span>
<span class="sd">    :param nlp_artifacts: precomputed NlpArtifacts</span>
<span class="sd">    :return: an array of the found entities in the text</span>

<span class="sd">    :example:</span>

<span class="sd">    &gt;&gt;&gt; from presidio_analyzer import AnalyzerEngine</span>

<span class="sd">    &gt;&gt;&gt; # Set up the engine, loads the NLP module (spaCy model by default)</span>
<span class="sd">    &gt;&gt;&gt; # and other PII recognizers</span>
<span class="sd">    &gt;&gt;&gt; analyzer = AnalyzerEngine()</span>

<span class="sd">    &gt;&gt;&gt; # Call analyzer to get results</span>
<span class="sd">    &gt;&gt;&gt; results = analyzer.analyze(text=&#39;My phone number is 212-555-5555&#39;, entities=[&#39;PHONE_NUMBER&#39;], language=&#39;en&#39;) # noqa D501</span>
<span class="sd">    &gt;&gt;&gt; print(results)</span>
<span class="sd">    [type: PHONE_NUMBER, start: 19, end: 31, score: 0.85]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">all_fields</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">entities</span>

    <span class="n">recognizers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span>
        <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
        <span class="n">entities</span><span class="o">=</span><span class="n">entities</span><span class="p">,</span>
        <span class="n">all_fields</span><span class="o">=</span><span class="n">all_fields</span><span class="p">,</span>
        <span class="n">ad_hoc_recognizers</span><span class="o">=</span><span class="n">ad_hoc_recognizers</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">all_fields</span><span class="p">:</span>
        <span class="c1"># Since all_fields=True, list all entities by iterating</span>
        <span class="c1"># over all recognizers</span>
        <span class="n">entities</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">)</span>

    <span class="c1"># run the nlp pipeline over the given text, store the results in</span>
    <span class="c1"># a NlpArtifacts instance</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">nlp_artifacts</span><span class="p">:</span>
        <span class="n">nlp_artifacts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">process_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_decision_process</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span>
            <span class="n">correlation_id</span><span class="p">,</span> <span class="s2">&quot;nlp artifacts:&quot;</span> <span class="o">+</span> <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>
        <span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">:</span>
        <span class="c1"># Lazy loading of the relevant recognizers</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">is_loaded</span><span class="p">:</span>
            <span class="n">recognizer</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
            <span class="n">recognizer</span><span class="o">.</span><span class="n">is_loaded</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># analyze using the current recognizer and append the results</span>
        <span class="n">current_results</span> <span class="o">=</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">entities</span><span class="o">=</span><span class="n">entities</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">current_results</span><span class="p">:</span>
            <span class="c1"># add recognizer name to recognition metadata inside results</span>
            <span class="c1"># if not exists</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__add_recognizer_id_if_not_exists</span><span class="p">(</span><span class="n">current_results</span><span class="p">,</span> <span class="n">recognizer</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">current_results</span><span class="p">)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enhance_using_context</span><span class="p">(</span>
        <span class="n">text</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">recognizers</span><span class="p">,</span> <span class="n">context</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_decision_process</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_tracer</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span>
            <span class="n">correlation_id</span><span class="p">,</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]),</span>
        <span class="p">)</span>

    <span class="c1"># Remove duplicates or low score results</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">remove_duplicates</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__remove_low_scores</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">score_threshold</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">allow_list</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_allow_list</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">allow_list</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">return_decision_process</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__remove_decision_process</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalyzerEngine.get_recognizers" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of PII recognizers currently loaded.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>language</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Return the recognizers supporting a given language.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of [Recognizer] as a RecognizersAllResponse</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recognizers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of PII recognizers currently loaded.</span>

<span class="sd">    :param language: Return the recognizers supporting a given language.</span>
<span class="sd">    :return: List of [Recognizer] as a RecognizersAllResponse</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">language</span><span class="p">:</span>
        <span class="n">languages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_languages</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">languages</span> <span class="o">=</span> <span class="p">[</span><span class="n">language</span><span class="p">]</span>

    <span class="n">recognizers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">language</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fetching all recognizers for language </span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">all_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">recognizers</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.AnalyzerEngine.get_supported_entities" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_supported_entities</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of the entities that can be detected.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>language</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Return only entities supported in a specific language.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of entity names</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_supported_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of the entities that can be detected.</span>

<span class="sd">    :param language: Return only entities supported in a specific language.</span>
<span class="sd">    :return: List of entity names</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">recognizers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">)</span>
    <span class="n">supported_entities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">:</span>
        <span class="n">supported_entities</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">recognizer</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">())</span>

    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">supported_entities</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.AnalyzerRequest" class="doc doc-heading">
          <code>AnalyzerRequest</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Analyzer request data.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>req_data</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A request dictionary with the following fields: text: the text to analyze language: the language of the text entities: List of PII entities that should be looked for in the text. If entities=None then all entities are looked for. correlation_id: cross call ID for this request score_threshold: A minimum value for which to return an identified entity log_decision_process: Should the decision points within the analysis be logged return_decision_process: Should the decision points within the analysis returned as part of the response</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/analyzer_request.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AnalyzerRequest</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyzer request data.</span>

<span class="sd">    :param req_data: A request dictionary with the following fields:</span>
<span class="sd">        text: the text to analyze</span>
<span class="sd">        language: the language of the text</span>
<span class="sd">        entities: List of PII entities that should be looked for in the text.</span>
<span class="sd">        If entities=None then all entities are looked for.</span>
<span class="sd">        correlation_id: cross call ID for this request</span>
<span class="sd">        score_threshold: A minimum value for which to return an identified entity</span>
<span class="sd">        log_decision_process: Should the decision points within the analysis</span>
<span class="sd">        be logged</span>
<span class="sd">        return_decision_process: Should the decision points within the analysis</span>
<span class="sd">        returned as part of the response</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entities</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entities&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">correlation_id</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;correlation_id&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score_threshold</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;score_threshold&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">return_decision_process</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;return_decision_process&quot;</span><span class="p">)</span>
        <span class="n">ad_hoc_recognizers</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ad_hoc_recognizers&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ad_hoc_recognizers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">ad_hoc_recognizers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ad_hoc_recognizers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">PatternRecognizer</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">ad_hoc_recognizers</span>
            <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">req_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;context&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.BatchAnalyzerEngine" class="doc doc-heading">
          <code>BatchAnalyzerEngine</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Batch analysis of documents (tables, lists, dicts).</p>
<p>Wrapper class to run Presidio Analyzer Engine on multiple values,
either lists/iterators of strings, or dictionaries.</p>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/batch_analyzer_engine.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BatchAnalyzerEngine</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Batch analysis of documents (tables, lists, dicts).</span>

<span class="sd">    Wrapper class to run Presidio Analyzer Engine on multiple values,</span>
<span class="sd">    either lists/iterators of strings, or dictionaries.</span>

<span class="sd">    :param: analyzer_engine: AnalyzerEngine instance to use</span>
<span class="sd">    for handling the values in those collections.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analyzer_engine</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AnalyzerEngine</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span> <span class="o">=</span> <span class="n">analyzer_engine</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">analyzer_engine</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span> <span class="o">=</span> <span class="n">AnalyzerEngine</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">analyze_iterator</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">texts</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span>
        <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze an iterable of strings.</span>

<span class="sd">        :param texts: An list containing strings to be analyzed.</span>
<span class="sd">        :param language: Input language</span>
<span class="sd">        :param kwargs: Additional parameters for the `AnalyzerEngine.analyze` method.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># validate types</span>
        <span class="n">texts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_types</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>

        <span class="c1"># Process the texts as batch for improved performance</span>
        <span class="n">nlp_artifacts_batch</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NlpArtifacts</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span><span class="o">.</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">process_batch</span><span class="p">(</span>
            <span class="n">texts</span><span class="o">=</span><span class="n">texts</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span>
        <span class="p">)</span>

        <span class="n">list_results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">nlp_artifacts</span> <span class="ow">in</span> <span class="n">nlp_artifacts_batch</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span>

            <span class="n">list_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">list_results</span>

    <span class="k">def</span> <span class="nf">analyze_dict</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">input_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span>
        <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">keys_to_skip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">DictAnalyzerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze a dictionary of keys (strings) and values/iterable of values.</span>

<span class="sd">        Non-string values are returned as is.</span>

<span class="sd">        :param input_dict: The input dictionary for analysis</span>
<span class="sd">        :param language: Input language</span>
<span class="sd">        :param keys_to_skip: Keys to ignore during analysis</span>
<span class="sd">        :param kwargs: Additional keyword arguments</span>
<span class="sd">        for the `AnalyzerEngine.analyze` method.</span>
<span class="sd">        Use this to pass arguments to the analyze method,</span>
<span class="sd">        such as `ad_hoc_recognizers`, `context`, `return_decision_process`.</span>
<span class="sd">        See `AnalyzerEngine.analyze` for the full list.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">context</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s2">&quot;context&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">keys_to_skip</span><span class="p">:</span>
            <span class="n">keys_to_skip</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">input_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_to_skip</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">DictAnalyzerResult</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">recognizer_results</span><span class="o">=</span><span class="p">[])</span>
                <span class="k">continue</span>  <span class="c1"># skip this key as requested</span>

            <span class="c1"># Add the key as an additional context</span>
            <span class="n">specific_context</span> <span class="o">=</span> <span class="n">context</span><span class="p">[:]</span>
            <span class="n">specific_context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
                <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span>
                    <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">new_keys_to_skip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nested_keys_to_skip</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">keys_to_skip</span><span class="p">)</span>
                <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_dict</span><span class="p">(</span>
                    <span class="n">input_dict</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
                    <span class="n">context</span><span class="o">=</span><span class="n">specific_context</span><span class="p">,</span>
                    <span class="n">keys_to_skip</span><span class="o">=</span><span class="n">new_keys_to_skip</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
                <span class="c1"># Recursively iterate nested dicts</span>

                <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_iterator</span><span class="p">(</span>
                    <span class="n">texts</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                    <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
                    <span class="n">context</span><span class="o">=</span><span class="n">specific_context</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2"> is unsupported.&quot;</span><span class="p">)</span>

            <span class="k">yield</span> <span class="n">DictAnalyzerResult</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">recognizer_results</span><span class="o">=</span><span class="n">results</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_validate_types</span><span class="p">(</span><span class="n">value_iterator</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">value_iterator</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">val</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">err_msg</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s2">&quot;Analyzer.analyze_iterator only works &quot;</span>
                    <span class="s2">&quot;on primitive types (int, float, bool, str). &quot;</span>
                    <span class="s2">&quot;Lists of objects are not yet supported.&quot;</span>
                <span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">val</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_nested_keys_to_skip</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">keys_to_skip</span><span class="p">):</span>
        <span class="n">new_keys_to_skip</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">k</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys_to_skip</span> <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">new_keys_to_skip</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.BatchAnalyzerEngine.analyze_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">analyze_dict</span><span class="p">(</span><span class="n">input_dict</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">keys_to_skip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Analyze a dictionary of keys (strings) and values/iterable of values.</p>
<p>Non-string values are returned as is.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>input_dict</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Union">Union</span>[<span title="typing.Any">Any</span>, <span title="typing.Iterable">Iterable</span>[<span title="typing.Any">Any</span>]]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The input dictionary for analysis</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>language</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Input language</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>keys_to_skip</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Keys to ignore during analysis</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Additional keyword arguments for the <code>AnalyzerEngine.analyze</code> method. Use this to pass arguments to the analyze method, such as <code>ad_hoc_recognizers</code>, <code>context</code>, <code>return_decision_process</code>. See <code>AnalyzerEngine.analyze</code> for the full list.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/batch_analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">analyze_dict</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">input_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Any</span><span class="p">]]],</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">keys_to_skip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">DictAnalyzerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze a dictionary of keys (strings) and values/iterable of values.</span>

<span class="sd">    Non-string values are returned as is.</span>

<span class="sd">    :param input_dict: The input dictionary for analysis</span>
<span class="sd">    :param language: Input language</span>
<span class="sd">    :param keys_to_skip: Keys to ignore during analysis</span>
<span class="sd">    :param kwargs: Additional keyword arguments</span>
<span class="sd">    for the `AnalyzerEngine.analyze` method.</span>
<span class="sd">    Use this to pass arguments to the analyze method,</span>
<span class="sd">    such as `ad_hoc_recognizers`, `context`, `return_decision_process`.</span>
<span class="sd">    See `AnalyzerEngine.analyze` for the full list.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">context</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="s2">&quot;context&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">keys_to_skip</span><span class="p">:</span>
        <span class="n">keys_to_skip</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">input_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_to_skip</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">DictAnalyzerResult</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">recognizer_results</span><span class="o">=</span><span class="p">[])</span>
            <span class="k">continue</span>  <span class="c1"># skip this key as requested</span>

        <span class="c1"># Add the key as an additional context</span>
        <span class="n">specific_context</span> <span class="o">=</span> <span class="n">context</span><span class="p">[:]</span>
        <span class="n">specific_context</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">new_keys_to_skip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nested_keys_to_skip</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">keys_to_skip</span><span class="p">)</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_dict</span><span class="p">(</span>
                <span class="n">input_dict</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
                <span class="n">context</span><span class="o">=</span><span class="n">specific_context</span><span class="p">,</span>
                <span class="n">keys_to_skip</span><span class="o">=</span><span class="n">new_keys_to_skip</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
            <span class="c1"># Recursively iterate nested dicts</span>

            <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyze_iterator</span><span class="p">(</span>
                <span class="n">texts</span><span class="o">=</span><span class="n">value</span><span class="p">,</span>
                <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
                <span class="n">context</span><span class="o">=</span><span class="n">specific_context</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">}</span><span class="s2"> is unsupported.&quot;</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">DictAnalyzerResult</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">recognizer_results</span><span class="o">=</span><span class="n">results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.BatchAnalyzerEngine.analyze_iterator" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">analyze_iterator</span><span class="p">(</span><span class="n">texts</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Analyze an iterable of strings.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>texts</code></td>
          <td>
                <code><span title="typing.Iterable">Iterable</span>[<span title="typing.Union">Union</span>[str, bool, float, int]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An list containing strings to be analyzed.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>language</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Input language</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>kwargs</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Additional parameters for the <code>AnalyzerEngine.analyze</code> method.</p>
            </div>
          </td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/batch_analyzer_engine.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">analyze_iterator</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">texts</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze an iterable of strings.</span>

<span class="sd">    :param texts: An list containing strings to be analyzed.</span>
<span class="sd">    :param language: Input language</span>
<span class="sd">    :param kwargs: Additional parameters for the `AnalyzerEngine.analyze` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># validate types</span>
    <span class="n">texts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_types</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>

    <span class="c1"># Process the texts as batch for improved performance</span>
    <span class="n">nlp_artifacts_batch</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span>
        <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NlpArtifacts</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span><span class="o">.</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">process_batch</span><span class="p">(</span>
        <span class="n">texts</span><span class="o">=</span><span class="n">texts</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span>
    <span class="p">)</span>

    <span class="n">list_results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">text</span><span class="p">,</span> <span class="n">nlp_artifacts</span> <span class="ow">in</span> <span class="n">nlp_artifacts_batch</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer_engine</span><span class="o">.</span><span class="n">analyze</span><span class="p">(</span>
            <span class="n">text</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>

        <span class="n">list_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">list_results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.ContextAwareEnhancer" class="doc doc-heading">
          <code>ContextAwareEnhancer</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>A class representing an abstract context aware enhancer.</p>
<p>Context words might enhance confidence score of a recognized entity,
ContextAwareEnhancer is an abstract class to be inherited by a context aware
enhancer logic.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>context_similarity_factor</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>How much to enhance confidence of match entity</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>min_score_with_context_similarity</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Minimum confidence score</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>context_prefix_count</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>how many words before the entity to match context</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>context_suffix_count</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>how many words after the entity to match context</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/context_aware_enhancers/context_aware_enhancer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ContextAwareEnhancer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing an abstract context aware enhancer.</span>

<span class="sd">    Context words might enhance confidence score of a recognized entity,</span>
<span class="sd">    ContextAwareEnhancer is an abstract class to be inherited by a context aware</span>
<span class="sd">    enhancer logic.</span>

<span class="sd">    :param context_similarity_factor: How much to enhance confidence of match entity</span>
<span class="sd">    :param min_score_with_context_similarity: Minimum confidence score</span>
<span class="sd">    :param context_prefix_count: how many words before the entity to match context</span>
<span class="sd">    :param context_suffix_count: how many words after the entity to match context</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">MIN_SCORE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">MAX_SCORE</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context_similarity_factor</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">min_score_with_context_similarity</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">context_prefix_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">context_suffix_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">context_similarity_factor</span> <span class="o">=</span> <span class="n">context_similarity_factor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_score_with_context_similarity</span> <span class="o">=</span> <span class="n">min_score_with_context_similarity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_prefix_count</span> <span class="o">=</span> <span class="n">context_prefix_count</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context_suffix_count</span> <span class="o">=</span> <span class="n">context_suffix_count</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">enhance_using_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">raw_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
        <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span>
        <span class="n">recognizers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">],</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update results in case surrounding words are relevant to the context words.</span>

<span class="sd">        Using the surrounding words of the actual word matches, look</span>
<span class="sd">        for specific strings that if found contribute to the score</span>
<span class="sd">        of the result, improving the confidence that the match is</span>
<span class="sd">        indeed of that PII entity type</span>

<span class="sd">        :param text: The actual text that was analyzed</span>
<span class="sd">        :param raw_results: Recognizer results which didn&#39;t take</span>
<span class="sd">                            context into consideration</span>
<span class="sd">        :param nlp_artifacts: The nlp artifacts contains elements</span>
<span class="sd">                              such as lemmatized tokens for better</span>
<span class="sd">                              accuracy of the context enhancement process</span>
<span class="sd">        :param recognizers: the list of recognizers</span>
<span class="sd">        :param context: list of context words</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">raw_results</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.ContextAwareEnhancer.enhance_using_context" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">enhance_using_context</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">raw_results</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">recognizers</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update results in case surrounding words are relevant to the context words.</p>
<p>Using the surrounding words of the actual word matches, look
for specific strings that if found contribute to the score
of the result, improving the confidence that the match is
indeed of that PII entity type</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The actual text that was analyzed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>raw_results</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Recognizer results which didn't take context into consideration</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>nlp_artifacts</code></td>
          <td>
                <code><span title="presidio_analyzer.nlp_engine.NlpArtifacts">NlpArtifacts</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The nlp artifacts contains elements such as lemmatized tokens for better accuracy of the context enhancement process</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recognizers</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the list of recognizers</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of context words</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/context_aware_enhancers/context_aware_enhancer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">enhance_using_context</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">raw_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
    <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span>
    <span class="n">recognizers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">],</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update results in case surrounding words are relevant to the context words.</span>

<span class="sd">    Using the surrounding words of the actual word matches, look</span>
<span class="sd">    for specific strings that if found contribute to the score</span>
<span class="sd">    of the result, improving the confidence that the match is</span>
<span class="sd">    indeed of that PII entity type</span>

<span class="sd">    :param text: The actual text that was analyzed</span>
<span class="sd">    :param raw_results: Recognizer results which didn&#39;t take</span>
<span class="sd">                        context into consideration</span>
<span class="sd">    :param nlp_artifacts: The nlp artifacts contains elements</span>
<span class="sd">                          such as lemmatized tokens for better</span>
<span class="sd">                          accuracy of the context enhancement process</span>
<span class="sd">    :param recognizers: the list of recognizers</span>
<span class="sd">    :param context: list of context words</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">raw_results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.DictAnalyzerResult" class="doc doc-heading">
          <code>DictAnalyzerResult</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">

  
      <p>Data class for holding the output of the Presidio Analyzer on dictionaries.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>key</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>key in dictionary</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>value</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[str, <span title="typing.List">List</span>[str], dict]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>value to run analysis on (either string or list of strings)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recognizer_results</code></td>
          <td>
                <code><span title="typing.Union">Union</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>], <span title="typing.List">List</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]], <span title="typing.Iterator">Iterator</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.dict_analyzer_result.DictAnalyzerResult" href="#presidio_analyzer.DictAnalyzerResult">DictAnalyzerResult</a>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Analyzer output for one value. Could be either: - A list of recognizer results if the input is one string - A list of lists of recognizer results, if the input is a list of strings. - An iterator of a DictAnalyzerResult, if the input is a dictionary. In this case the recognizer_results would be the iterator of the DictAnalyzerResults next level in the dictionary.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/dict_analyzer_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">DictAnalyzerResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data class for holding the output of the Presidio Analyzer on dictionaries.</span>

<span class="sd">    :param key: key in dictionary</span>
<span class="sd">    :param value: value to run analysis on (either string or list of strings)</span>
<span class="sd">    :param recognizer_results: Analyzer output for one value.</span>
<span class="sd">    Could be either:</span>
<span class="sd">     - A list of recognizer results if the input is one string</span>
<span class="sd">     - A list of lists of recognizer results, if the input is a list of strings.</span>
<span class="sd">     - An iterator of a DictAnalyzerResult, if the input is a dictionary.</span>
<span class="sd">     In this case the recognizer_results would be the iterator</span>
<span class="sd">     of the DictAnalyzerResults next level in the dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">dict</span><span class="p">]</span>
    <span class="n">recognizer_results</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
        <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
        <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]],</span>
        <span class="n">Iterator</span><span class="p">[</span><span class="s2">&quot;DictAnalyzerResult&quot;</span><span class="p">],</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.EntityRecognizer" class="doc doc-heading">
          <code>EntityRecognizer</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>A class representing an abstract PII entity recognizer.</p>
<p>EntityRecognizer is an abstract class to be inherited by
Recognizers which hold the logic for recognizing specific PII entities.</p>
<p>EntityRecognizer exposes a method called enhance_using_context which
can be overridden in case a custom context aware enhancement is needed
in derived class of a recognizer.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>supported_entities</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the entities supported by this recognizer (for example, phone number, address, etc.)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>supported_language</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the language supported by this recognizer. The supported langauge code is iso6391Name</p>
            </div>
          </td>
          <td>
                <code>&#39;en&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of this recognizer (optional)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the recognizer current version</p>
            </div>
          </td>
          <td>
                <code>&#39;0.0.1&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a list of words which can help boost confidence score when they appear in context of the matched entity</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EntityRecognizer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing an abstract PII entity recognizer.</span>

<span class="sd">    EntityRecognizer is an abstract class to be inherited by</span>
<span class="sd">    Recognizers which hold the logic for recognizing specific PII entities.</span>

<span class="sd">    EntityRecognizer exposes a method called enhance_using_context which</span>
<span class="sd">    can be overridden in case a custom context aware enhancement is needed</span>
<span class="sd">    in derived class of a recognizer.</span>

<span class="sd">    :param supported_entities: the entities supported by this recognizer</span>
<span class="sd">    (for example, phone number, address, etc.)</span>
<span class="sd">    :param supported_language: the language supported by this recognizer.</span>
<span class="sd">    The supported langauge code is iso6391Name</span>
<span class="sd">    :param name: the name of this recognizer (optional)</span>
<span class="sd">    :param version: the recognizer current version</span>
<span class="sd">    :param context: a list of words which can help boost confidence score</span>
<span class="sd">    when they appear in context of the matched entity</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">MIN_SCORE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">MAX_SCORE</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">supported_entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">supported_language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">supported_entities</span> <span class="o">=</span> <span class="n">supported_entities</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># assign class name as name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">supported_language</span> <span class="o">=</span> <span class="n">supported_language</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_loaded</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span> <span class="k">if</span> <span class="n">context</span> <span class="k">else</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Loaded recognizer: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_loaded</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a unique identifier of this recognizer.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the recognizer assets if needed.</span>

<span class="sd">        (e.g. machine learning models)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyze text to identify entities.</span>

<span class="sd">        :param text: The text to be analyzed</span>
<span class="sd">        :param entities: The list of entities this recognizer is able to detect</span>
<span class="sd">        :param nlp_artifacts: A group of attributes which are the result of</span>
<span class="sd">        an NLP process over the input text.</span>
<span class="sd">        :return: List of results detected by this recognizer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">enhance_using_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">raw_recognizer_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
        <span class="n">other_raw_recognizer_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
        <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Enhance confidence score using context of the entity.</span>

<span class="sd">        Override this method in derived class in case a custom logic</span>
<span class="sd">        is needed, otherwise return value will be equal to</span>
<span class="sd">        raw_results.</span>

<span class="sd">        in case a result score is boosted, derived class need to update</span>
<span class="sd">        result.recognition_metadata[RecognizerResult.IS_SCORE_ENHANCED_BY_CONTEXT_KEY]</span>

<span class="sd">        :param text: The actual text that was analyzed</span>
<span class="sd">        :param raw_recognizer_results: This recognizer&#39;s results, to be updated</span>
<span class="sd">        based on recognizer specific context.</span>
<span class="sd">        :param other_raw_recognizer_results: Other recognizer results matched in</span>
<span class="sd">        the given text to allow related entity context enhancement</span>
<span class="sd">        :param nlp_artifacts: The nlp artifacts contains elements</span>
<span class="sd">                              such as lemmatized tokens for better</span>
<span class="sd">                              accuracy of the context enhancement process</span>
<span class="sd">        :param context: list of context words</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">raw_recognizer_results</span>

    <span class="k">def</span> <span class="nf">get_supported_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the list of entities this recognizer can identify.</span>

<span class="sd">        :return: A list of the supported entities by this recognizer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_entities</span>

    <span class="k">def</span> <span class="nf">get_supported_language</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the language this recognizer can support.</span>

<span class="sd">        :return: A list of the supported language by this recognizer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_language</span>

    <span class="k">def</span> <span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the version of this recognizer.</span>

<span class="sd">        :return: The current version of this recognizer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize self to dictionary.</span>

<span class="sd">        :return: a dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">return_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;supported_entities&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_entities</span><span class="p">,</span>
            <span class="s2">&quot;supported_language&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_language</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">return_dict</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">entity_recognizer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;EntityRecognizer&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create EntityRecognizer from a dict input.</span>

<span class="sd">        :param entity_recognizer_dict: Dict containing keys and values for instantiation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">entity_recognizer_dict</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">remove_duplicates</span><span class="p">(</span><span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove duplicate results.</span>

<span class="sd">        Remove duplicates in case the two results</span>
<span class="sd">        have identical start and ends and types.</span>
<span class="sd">        :param results: List[RecognizerResult]</span>
<span class="sd">        :return: List[RecognizerResult]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
        <span class="n">results</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">start</span><span class="p">)))</span>
        <span class="n">filtered_results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">to_keep</span> <span class="o">=</span> <span class="n">result</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">filtered_results</span>  <span class="c1"># equals based comparison</span>
            <span class="k">if</span> <span class="n">to_keep</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">filtered</span> <span class="ow">in</span> <span class="n">filtered_results</span><span class="p">:</span>
                    <span class="c1"># If result is contained in one of the other results</span>
                    <span class="k">if</span> <span class="p">(</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">contained_in</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
                        <span class="ow">and</span> <span class="n">result</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">filtered</span><span class="o">.</span><span class="n">entity_type</span>
                    <span class="p">):</span>
                        <span class="n">to_keep</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>

            <span class="k">if</span> <span class="n">to_keep</span><span class="p">:</span>
                <span class="n">filtered_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">filtered_results</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="presidio_analyzer.EntityRecognizer.id" class="doc doc-heading">
          <code class="highlight language-python"><span class="nb">id</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a unique identifier of this recognizer.</p>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.analyze" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">analyze</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">entities</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Analyze text to identify entities.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The text to be analyzed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>entities</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The list of entities this recognizer is able to detect</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>nlp_artifacts</code></td>
          <td>
                <code><span title="presidio_analyzer.nlp_engine.NlpArtifacts">NlpArtifacts</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A group of attributes which are the result of an NLP process over the input text.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of results detected by this recognizer.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyze text to identify entities.</span>

<span class="sd">    :param text: The text to be analyzed</span>
<span class="sd">    :param entities: The list of entities this recognizer is able to detect</span>
<span class="sd">    :param nlp_artifacts: A group of attributes which are the result of</span>
<span class="sd">    an NLP process over the input text.</span>
<span class="sd">    :return: List of results detected by this recognizer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.enhance_using_context" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">enhance_using_context</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">raw_recognizer_results</span><span class="p">,</span> <span class="n">other_raw_recognizer_results</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Enhance confidence score using context of the entity.</p>
<p>Override this method in derived class in case a custom logic
is needed, otherwise return value will be equal to
raw_results.</p>
<p>in case a result score is boosted, derived class need to update
result.recognition_metadata[RecognizerResult.IS_SCORE_ENHANCED_BY_CONTEXT_KEY]</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The actual text that was analyzed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>raw_recognizer_results</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>This recognizer's results, to be updated based on recognizer specific context.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>other_raw_recognizer_results</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Other recognizer results matched in the given text to allow related entity context enhancement</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>nlp_artifacts</code></td>
          <td>
                <code><span title="presidio_analyzer.nlp_engine.NlpArtifacts">NlpArtifacts</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The nlp artifacts contains elements such as lemmatized tokens for better accuracy of the context enhancement process</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of context words</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">enhance_using_context</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">raw_recognizer_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
    <span class="n">other_raw_recognizer_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
    <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Enhance confidence score using context of the entity.</span>

<span class="sd">    Override this method in derived class in case a custom logic</span>
<span class="sd">    is needed, otherwise return value will be equal to</span>
<span class="sd">    raw_results.</span>

<span class="sd">    in case a result score is boosted, derived class need to update</span>
<span class="sd">    result.recognition_metadata[RecognizerResult.IS_SCORE_ENHANCED_BY_CONTEXT_KEY]</span>

<span class="sd">    :param text: The actual text that was analyzed</span>
<span class="sd">    :param raw_recognizer_results: This recognizer&#39;s results, to be updated</span>
<span class="sd">    based on recognizer specific context.</span>
<span class="sd">    :param other_raw_recognizer_results: Other recognizer results matched in</span>
<span class="sd">    the given text to allow related entity context enhancement</span>
<span class="sd">    :param nlp_artifacts: The nlp artifacts contains elements</span>
<span class="sd">                          such as lemmatized tokens for better</span>
<span class="sd">                          accuracy of the context enhancement process</span>
<span class="sd">    :param context: list of context words</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">raw_recognizer_results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">entity_recognizer_dict</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create EntityRecognizer from a dict input.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>entity_recognizer_dict</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dict containing keys and values for instantiation</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">entity_recognizer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;EntityRecognizer&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create EntityRecognizer from a dict input.</span>

<span class="sd">    :param entity_recognizer_dict: Dict containing keys and values for instantiation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">entity_recognizer_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.get_supported_entities" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_supported_entities</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the list of entities this recognizer can identify.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of the supported entities by this recognizer</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_supported_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the list of entities this recognizer can identify.</span>

<span class="sd">    :return: A list of the supported entities by this recognizer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_entities</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.get_supported_language" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_supported_language</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the language this recognizer can support.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of the supported language by this recognizer</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_supported_language</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the language this recognizer can support.</span>

<span class="sd">    :return: A list of the supported language by this recognizer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_language</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.get_version" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_version</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the version of this recognizer.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The current version of this recognizer</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the version of this recognizer.</span>

<span class="sd">    :return: The current version of this recognizer</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.load" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Initialize the recognizer assets if needed.</p>
<p>(e.g. machine learning models)</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the recognizer assets if needed.</span>

<span class="sd">    (e.g. machine learning models)</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.remove_duplicates" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">remove_duplicates</span><span class="p">(</span><span class="n">results</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Remove duplicate results.</p>
<p>Remove duplicates in case the two results
have identical start and ends and types.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>results</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List[RecognizerResult]</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List[RecognizerResult]</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">remove_duplicates</span><span class="p">(</span><span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove duplicate results.</span>

<span class="sd">    Remove duplicates in case the two results</span>
<span class="sd">    have identical start and ends and types.</span>
<span class="sd">    :param results: List[RecognizerResult]</span>
<span class="sd">    :return: List[RecognizerResult]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">end</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">start</span><span class="p">)))</span>
    <span class="n">filtered_results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">to_keep</span> <span class="o">=</span> <span class="n">result</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">filtered_results</span>  <span class="c1"># equals based comparison</span>
        <span class="k">if</span> <span class="n">to_keep</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">filtered</span> <span class="ow">in</span> <span class="n">filtered_results</span><span class="p">:</span>
                <span class="c1"># If result is contained in one of the other results</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">contained_in</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">result</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">filtered</span><span class="o">.</span><span class="n">entity_type</span>
                <span class="p">):</span>
                    <span class="n">to_keep</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">break</span>

        <span class="k">if</span> <span class="n">to_keep</span><span class="p">:</span>
            <span class="n">filtered_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">filtered_results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.EntityRecognizer.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Serialize self to dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/entity_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize self to dictionary.</span>

<span class="sd">    :return: a dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">return_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;supported_entities&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_entities</span><span class="p">,</span>
        <span class="s2">&quot;supported_language&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">supported_language</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">return_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.LemmaContextAwareEnhancer" class="doc doc-heading">
          <code>LemmaContextAwareEnhancer</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="presidio_analyzer.context_aware_enhancers.ContextAwareEnhancer" href="#presidio_analyzer.ContextAwareEnhancer">ContextAwareEnhancer</a></code></p>

  
      <p>A class representing a lemma based context aware enhancer logic.</p>
<p>Context words might enhance confidence score of a recognized entity,
LemmaContextAwareEnhancer is an implementation of Lemma based context aware logic,
it compares spacy lemmas of each word in context of the matched entity to given
context and the recognizer context words,
if matched it enhance the recognized entity confidence score by a given factor.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>context_similarity_factor</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>How much to enhance confidence of match entity</p>
            </div>
          </td>
          <td>
                <code>0.35</code>
          </td>
        </tr>
        <tr>
          <td><code>min_score_with_context_similarity</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Minimum confidence score</p>
            </div>
          </td>
          <td>
                <code>0.4</code>
          </td>
        </tr>
        <tr>
          <td><code>context_prefix_count</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>how many words before the entity to match context</p>
            </div>
          </td>
          <td>
                <code>5</code>
          </td>
        </tr>
        <tr>
          <td><code>context_suffix_count</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>how many words after the entity to match context</p>
            </div>
          </td>
          <td>
                <code>0</code>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/context_aware_enhancers/lemma_context_aware_enhancer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LemmaContextAwareEnhancer</span><span class="p">(</span><span class="n">ContextAwareEnhancer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class representing a lemma based context aware enhancer logic.</span>

<span class="sd">    Context words might enhance confidence score of a recognized entity,</span>
<span class="sd">    LemmaContextAwareEnhancer is an implementation of Lemma based context aware logic,</span>
<span class="sd">    it compares spacy lemmas of each word in context of the matched entity to given</span>
<span class="sd">    context and the recognizer context words,</span>
<span class="sd">    if matched it enhance the recognized entity confidence score by a given factor.</span>

<span class="sd">    :param context_similarity_factor: How much to enhance confidence of match entity</span>
<span class="sd">    :param min_score_with_context_similarity: Minimum confidence score</span>
<span class="sd">    :param context_prefix_count: how many words before the entity to match context</span>
<span class="sd">    :param context_suffix_count: how many words after the entity to match context</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">context_similarity_factor</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.35</span><span class="p">,</span>
        <span class="n">min_score_with_context_similarity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.4</span><span class="p">,</span>
        <span class="n">context_prefix_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">context_suffix_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">context_similarity_factor</span><span class="o">=</span><span class="n">context_similarity_factor</span><span class="p">,</span>
            <span class="n">min_score_with_context_similarity</span><span class="o">=</span><span class="n">min_score_with_context_similarity</span><span class="p">,</span>
            <span class="n">context_prefix_count</span><span class="o">=</span><span class="n">context_prefix_count</span><span class="p">,</span>
            <span class="n">context_suffix_count</span><span class="o">=</span><span class="n">context_suffix_count</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">enhance_using_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">raw_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
        <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span>
        <span class="n">recognizers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">],</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update results in case the lemmas of surrounding words or input context</span>
<span class="sd">        words are identical to the context words.</span>

<span class="sd">        Using the surrounding words of the actual word matches, look</span>
<span class="sd">        for specific strings that if found contribute to the score</span>
<span class="sd">        of the result, improving the confidence that the match is</span>
<span class="sd">        indeed of that PII entity type</span>

<span class="sd">        :param text: The actual text that was analyzed</span>
<span class="sd">        :param raw_results: Recognizer results which didn&#39;t take</span>
<span class="sd">                            context into consideration</span>
<span class="sd">        :param nlp_artifacts: The nlp artifacts contains elements</span>
<span class="sd">                              such as lemmatized tokens for better</span>
<span class="sd">                              accuracy of the context enhancement process</span>
<span class="sd">        :param recognizers: the list of recognizers</span>
<span class="sd">        :param context: list of context words</span>
<span class="sd">        &quot;&quot;&quot;</span>  <span class="c1"># noqa D205 D400</span>

        <span class="c1"># create a deep copy of the results object, so we can manipulate it</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">raw_results</span><span class="p">)</span>

        <span class="c1"># create recognizer context dictionary</span>
        <span class="n">recognizers_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">recognizer</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">recognizer</span> <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">}</span>

        <span class="c1"># Create empty list in None or lowercase all context words in the list</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">context</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">context</span><span class="p">]</span>

        <span class="c1"># Sanity</span>
        <span class="k">if</span> <span class="n">nlp_artifacts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;NLP artifacts were not provided&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">results</span>

        <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="n">recognizer</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># get recognizer matching the result, if found.</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span>
                <span class="ow">and</span> <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
                <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">):</span>
                <span class="n">recognizer</span> <span class="o">=</span> <span class="n">recognizers_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span>
                        <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
                    <span class="p">]</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">recognizer</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;Recognizer name not found as part of the &quot;</span>
                    <span class="s2">&quot;recognition_metadata dict in the RecognizerResult. &quot;</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># skip recognizer result if the recognizer doesn&#39;t support</span>
            <span class="c1"># context enhancement</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">context</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="s2">&quot;recognizer &#39;</span><span class="si">%s</span><span class="s2">&#39; does not support context enhancement&quot;</span><span class="p">,</span>
                    <span class="n">recognizer</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># skip context enhancement if already boosted by recognizer level</span>
            <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">IS_SCORE_ENHANCED_BY_CONTEXT_KEY</span>
            <span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;result score already boosted, skipping&quot;</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="c1"># extract lemmatized context from the surrounding of the match</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">start</span> <span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">end</span><span class="p">]</span>

            <span class="n">surrounding_words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_surrounding_words</span><span class="p">(</span>
                <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">word</span><span class="o">=</span><span class="n">word</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">start</span>
            <span class="p">)</span>

            <span class="c1"># combine other sources of context with surrounding words</span>
            <span class="n">surrounding_words</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

            <span class="n">supportive_context_word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_supportive_word_in_context</span><span class="p">(</span>
                <span class="n">surrounding_words</span><span class="p">,</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">context</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">supportive_context_word</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_similarity_factor</span>
                <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_score_with_context_similarity</span><span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">ContextAwareEnhancer</span><span class="o">.</span><span class="n">MAX_SCORE</span><span class="p">)</span>

                <span class="c1"># Update the explainability object with context information</span>
                <span class="c1"># helped to improve the score</span>
                <span class="n">result</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="o">.</span><span class="n">set_supportive_context_word</span><span class="p">(</span>
                    <span class="n">supportive_context_word</span>
                <span class="p">)</span>
                <span class="n">result</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="o">.</span><span class="n">set_improved_score</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">score</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_find_supportive_word_in_context</span><span class="p">(</span>
        <span class="n">context_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">recognizer_context_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find words in the text which are relevant for context evaluation.</span>

<span class="sd">        A word is considered a supportive context word if there&#39;s exact match</span>
<span class="sd">        between a keyword in context_text and any keyword in context_list.</span>

<span class="sd">        :param context_list words before and after the matched entity within</span>
<span class="sd">               a specified window size</span>
<span class="sd">        :param recognizer_context_list a list of words considered as</span>
<span class="sd">                context keywords manually specified by the recognizer&#39;s author</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># If the context list is empty, no need to continue</span>
        <span class="k">if</span> <span class="n">context_list</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">recognizer_context_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="k">for</span> <span class="n">predefined_context_word</span> <span class="ow">in</span> <span class="n">recognizer_context_list</span><span class="p">:</span>
            <span class="c1"># result == true only if any of the predefined context words</span>
            <span class="c1"># is found exactly or as a substring in any of the collected</span>
            <span class="c1"># context words</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="kc">True</span>
                    <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">context_list</span>
                    <span class="k">if</span> <span class="n">predefined_context_word</span> <span class="ow">in</span> <span class="n">keyword</span>
                <span class="p">),</span>
                <span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Found context keyword &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">predefined_context_word</span><span class="p">)</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">predefined_context_word</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">word</span>

    <span class="k">def</span> <span class="nf">_extract_surrounding_words</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span> <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract words surrounding another given word.</span>

<span class="sd">        The text from which the context is extracted is given in the nlp</span>
<span class="sd">        doc.</span>

<span class="sd">        :param nlp_artifacts: An abstraction layer which holds different</span>
<span class="sd">                              items which are the result of a NLP pipeline</span>
<span class="sd">                              execution on a given text</span>
<span class="sd">        :param word: The word to look for context around</span>
<span class="sd">        :param start: The start index of the word in the original text</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">tokens</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Skipping context extraction due to lack of NLP artifacts&quot;</span><span class="p">)</span>
            <span class="c1"># if there are no nlp artifacts, this is ok, we can</span>
            <span class="c1"># extract context and we return a valid, yet empty</span>
            <span class="c1"># context</span>
            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>

        <span class="c1"># Get the already prepared words in the given text, in their</span>
        <span class="c1"># LEMMATIZED version</span>
        <span class="n">lemmatized_keywords</span> <span class="o">=</span> <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">keywords</span>

        <span class="c1"># since the list of tokens is not necessarily aligned</span>
        <span class="c1"># with the actual index of the match, we look for the</span>
        <span class="c1"># token index which corresponds to the match</span>
        <span class="n">token_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_index_of_match_token</span><span class="p">(</span>
            <span class="n">word</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">tokens</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">tokens_indices</span>
        <span class="p">)</span>

        <span class="c1"># index i belongs to the PII entity, take the preceding n words</span>
        <span class="c1"># and the successing m words into a context list</span>

        <span class="n">backward_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_n_words_backward</span><span class="p">(</span>
            <span class="n">token_index</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context_prefix_count</span><span class="p">,</span>
            <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">lemmas</span><span class="p">,</span>
            <span class="n">lemmatized_keywords</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">forward_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_n_words_forward</span><span class="p">(</span>
            <span class="n">token_index</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">context_suffix_count</span><span class="p">,</span>
            <span class="n">nlp_artifacts</span><span class="o">.</span><span class="n">lemmas</span><span class="p">,</span>
            <span class="n">lemmatized_keywords</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">context_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">context_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">backward_context</span><span class="p">)</span>
        <span class="n">context_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">forward_context</span><span class="p">)</span>
        <span class="n">context_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">context_list</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Context list is: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">context_list</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">context_list</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_find_index_of_match_token</span><span class="p">(</span>
        <span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">tokens_indices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>  <span class="c1"># noqa ANN001</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># we use the known start index of the original word to find the actual</span>
        <span class="c1"># token at that index, we are not checking for equivilance since the</span>
        <span class="c1"># token might be just a substring of that word (e.g. for phone number</span>
        <span class="c1"># 555-124564 the first token might be just &#39;555&#39; or for a match like &#39;</span>
        <span class="c1"># rocket&#39; the actual token will just be &#39;rocket&#39; hence the misalignment</span>
        <span class="c1"># of indices)</span>
        <span class="c1"># Note: we are iterating over the original tokens (not the lemmatized)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">token</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tokens</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
            <span class="c1"># Either we found a token with the exact location, or</span>
            <span class="c1"># we take a token which its characters indices covers</span>
            <span class="c1"># the index we are looking for.</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">tokens_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">start</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">start</span> <span class="o">&lt;</span> <span class="n">tokens_indices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)):</span>
                <span class="c1"># found the interesting token, the one that around it</span>
                <span class="c1"># we take n words, we save the matching lemma</span>
                <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Did not find word &#39;&quot;</span> <span class="o">+</span> <span class="n">word</span> <span class="o">+</span> <span class="s2">&quot;&#39; &quot;</span>
                <span class="s2">&quot;in the list of tokens although it &quot;</span>
                <span class="s2">&quot;is expected to be found&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">i</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_add_n_words</span><span class="p">(</span>
        <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">n_words</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">lemmas</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">lemmatized_filtered_keywords</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">is_backward</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prepare a string of context words.</span>

<span class="sd">        Return a list of words which surrounds a lemma at a given index.</span>
<span class="sd">        The words will be collected only if exist in the filtered array</span>

<span class="sd">        :param index: index of the lemma that its surrounding words we want</span>
<span class="sd">        :param n_words: number of words to take</span>
<span class="sd">        :param lemmas: array of lemmas</span>
<span class="sd">        :param lemmatized_filtered_keywords: the array of filtered</span>
<span class="sd">               lemmas from the original sentence,</span>
<span class="sd">        :param is_backward: if true take the preceeding words, if false,</span>
<span class="sd">                            take the successing words</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">index</span>
        <span class="n">context_words</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># The entity itself is no interest to us...however we want to</span>
        <span class="c1"># consider it anyway for cases were it is attached with no spaces</span>
        <span class="c1"># to an interesting context word, so we allow it and add 1 to</span>
        <span class="c1"># the number of collected words</span>

        <span class="c1"># collect at most n words (in lower case)</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="n">n_words</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">while</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">lemmas</span><span class="p">)</span> <span class="ow">and</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">lower_lemma</span> <span class="o">=</span> <span class="n">lemmas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">lower_lemma</span> <span class="ow">in</span> <span class="n">lemmatized_filtered_keywords</span><span class="p">:</span>
                <span class="n">context_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lower_lemma</span><span class="p">)</span>
                <span class="n">remaining</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">is_backward</span> <span class="k">else</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">context_words</span>

    <span class="k">def</span> <span class="nf">_add_n_words_forward</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">n_words</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">lemmas</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">lemmatized_filtered_keywords</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_n_words</span><span class="p">(</span>
            <span class="n">index</span><span class="p">,</span> <span class="n">n_words</span><span class="p">,</span> <span class="n">lemmas</span><span class="p">,</span> <span class="n">lemmatized_filtered_keywords</span><span class="p">,</span> <span class="kc">False</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_add_n_words_backward</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">n_words</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">lemmas</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">lemmatized_filtered_keywords</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_n_words</span><span class="p">(</span>
            <span class="n">index</span><span class="p">,</span> <span class="n">n_words</span><span class="p">,</span> <span class="n">lemmas</span><span class="p">,</span> <span class="n">lemmatized_filtered_keywords</span><span class="p">,</span> <span class="kc">True</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.LemmaContextAwareEnhancer.enhance_using_context" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">enhance_using_context</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">raw_results</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">recognizers</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update results in case the lemmas of surrounding words or input context
words are identical to the context words.</p>
<p>Using the surrounding words of the actual word matches, look
for specific strings that if found contribute to the score
of the result, improving the confidence that the match is
indeed of that PII entity type</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The actual text that was analyzed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>raw_results</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Recognizer results which didn't take context into consideration</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>nlp_artifacts</code></td>
          <td>
                <code><span title="presidio_analyzer.nlp_engine.NlpArtifacts">NlpArtifacts</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The nlp artifacts contains elements such as lemmatized tokens for better accuracy of the context enhancement process</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>recognizers</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the list of recognizers</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of context words</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/context_aware_enhancers/lemma_context_aware_enhancer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">enhance_using_context</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">raw_results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">],</span>
    <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span><span class="p">,</span>
    <span class="n">recognizers</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">],</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update results in case the lemmas of surrounding words or input context</span>
<span class="sd">    words are identical to the context words.</span>

<span class="sd">    Using the surrounding words of the actual word matches, look</span>
<span class="sd">    for specific strings that if found contribute to the score</span>
<span class="sd">    of the result, improving the confidence that the match is</span>
<span class="sd">    indeed of that PII entity type</span>

<span class="sd">    :param text: The actual text that was analyzed</span>
<span class="sd">    :param raw_results: Recognizer results which didn&#39;t take</span>
<span class="sd">                        context into consideration</span>
<span class="sd">    :param nlp_artifacts: The nlp artifacts contains elements</span>
<span class="sd">                          such as lemmatized tokens for better</span>
<span class="sd">                          accuracy of the context enhancement process</span>
<span class="sd">    :param recognizers: the list of recognizers</span>
<span class="sd">    :param context: list of context words</span>
<span class="sd">    &quot;&quot;&quot;</span>  <span class="c1"># noqa D205 D400</span>

    <span class="c1"># create a deep copy of the results object, so we can manipulate it</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">raw_results</span><span class="p">)</span>

    <span class="c1"># create recognizer context dictionary</span>
    <span class="n">recognizers_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">recognizer</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">recognizer</span> <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">}</span>

    <span class="c1"># Create empty list in None or lowercase all context words in the list</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">context</span><span class="p">:</span>
        <span class="n">context</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">context</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">context</span><span class="p">]</span>

    <span class="c1"># Sanity</span>
    <span class="k">if</span> <span class="n">nlp_artifacts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;NLP artifacts were not provided&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">recognizer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># get recognizer matching the result, if found.</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span>
            <span class="ow">and</span> <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
            <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">):</span>
            <span class="n">recognizer</span> <span class="o">=</span> <span class="n">recognizers_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="p">[</span>
                    <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">recognizer</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Recognizer name not found as part of the &quot;</span>
                <span class="s2">&quot;recognition_metadata dict in the RecognizerResult. &quot;</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># skip recognizer result if the recognizer doesn&#39;t support</span>
        <span class="c1"># context enhancement</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">context</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;recognizer &#39;</span><span class="si">%s</span><span class="s2">&#39; does not support context enhancement&quot;</span><span class="p">,</span>
                <span class="n">recognizer</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># skip context enhancement if already boosted by recognizer level</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">recognition_metadata</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">IS_SCORE_ENHANCED_BY_CONTEXT_KEY</span>
        <span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;result score already boosted, skipping&quot;</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="c1"># extract lemmatized context from the surrounding of the match</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">start</span> <span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">end</span><span class="p">]</span>

        <span class="n">surrounding_words</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_surrounding_words</span><span class="p">(</span>
            <span class="n">nlp_artifacts</span><span class="o">=</span><span class="n">nlp_artifacts</span><span class="p">,</span> <span class="n">word</span><span class="o">=</span><span class="n">word</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">start</span>
        <span class="p">)</span>

        <span class="c1"># combine other sources of context with surrounding words</span>
        <span class="n">surrounding_words</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="n">supportive_context_word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_supportive_word_in_context</span><span class="p">(</span>
            <span class="n">surrounding_words</span><span class="p">,</span> <span class="n">recognizer</span><span class="o">.</span><span class="n">context</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">supportive_context_word</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context_similarity_factor</span>
            <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_score_with_context_similarity</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="n">ContextAwareEnhancer</span><span class="o">.</span><span class="n">MAX_SCORE</span><span class="p">)</span>

            <span class="c1"># Update the explainability object with context information</span>
            <span class="c1"># helped to improve the score</span>
            <span class="n">result</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="o">.</span><span class="n">set_supportive_context_word</span><span class="p">(</span>
                <span class="n">supportive_context_word</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="o">.</span><span class="n">set_improved_score</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">score</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.LocalRecognizer" class="doc doc-heading">
          <code>LocalRecognizer</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="abc.ABC">ABC</span></code>, <code><a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a></code></p>

  
      <p>PII entity recognizer which runs on the same process as the AnalyzerEngine.</p>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/local_recognizer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LocalRecognizer</span><span class="p">(</span><span class="n">ABC</span><span class="p">,</span> <span class="n">EntityRecognizer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PII entity recognizer which runs on the same process as the AnalyzerEngine.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.Pattern" class="doc doc-heading">
          <code>Pattern</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>A class that represents a regex pattern.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the name of the pattern</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>regex</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the regex pattern to detect</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>score</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the pattern's strength (values varies 0-1)</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/pattern.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Pattern</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class that represents a regex pattern.</span>

<span class="sd">    :param name: the name of the pattern</span>
<span class="sd">    :param regex: the regex pattern to detect</span>
<span class="sd">    :param score: the pattern&#39;s strength (values varies 0-1)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">regex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">score</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regex</span> <span class="o">=</span> <span class="n">regex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">score</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Turn this instance into a dictionary.</span>

<span class="sd">        :return: a dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">return_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="s2">&quot;regex&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">regex</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">return_dict</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">pattern_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Pattern&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load an instance from a dictionary.</span>

<span class="sd">        :param pattern_dict: a dictionary holding the pattern&#39;s parameters</span>
<span class="sd">        :return: a Pattern instance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">pattern_dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return string representation of instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return string representation of instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.Pattern.__repr__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return string representation of instance.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return string representation of instance.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.Pattern.__str__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return string representation of instance.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return string representation of instance.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.Pattern.from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">pattern_dict</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Load an instance from a dictionary.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pattern_dict</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary holding the pattern's parameters</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.pattern.Pattern" href="#presidio_analyzer.Pattern">Pattern</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a Pattern instance</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">pattern_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Pattern&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load an instance from a dictionary.</span>

<span class="sd">    :param pattern_dict: a dictionary holding the pattern&#39;s parameters</span>
<span class="sd">    :return: a Pattern instance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">pattern_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.Pattern.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Turn this instance into a dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn this instance into a dictionary.</span>

<span class="sd">    :return: a dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">return_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">,</span> <span class="s2">&quot;regex&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">regex</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">return_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.PatternRecognizer" class="doc doc-heading">
          <code>PatternRecognizer</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="presidio_analyzer.LocalRecognizer" href="#presidio_analyzer.LocalRecognizer">LocalRecognizer</a></code></p>

  
      <p>PII entity recognizer using regular expressions or deny-lists.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>patterns</code></td>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.Pattern" href="#presidio_analyzer.Pattern">Pattern</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of patterns to detect</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>deny_list</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of words to detect, in case our recognizer uses a predefined list of words (deny list)</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>context</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of context words</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>deny_list_score</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>confidence score for a term identified using a deny-list</p>
            </div>
          </td>
          <td>
                <code>1.0</code>
          </td>
        </tr>
        <tr>
          <td><code>global_regex_flags</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>regex flags to be used in regex matching, including deny-lists.</p>
            </div>
          </td>
          <td>
                <code><span title="regex.DOTALL">DOTALL</span> | <span title="regex.MULTILINE">MULTILINE</span> | <span title="regex.IGNORECASE">IGNORECASE</span></code>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PatternRecognizer</span><span class="p">(</span><span class="n">LocalRecognizer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    PII entity recognizer using regular expressions or deny-lists.</span>

<span class="sd">    :param patterns: A list of patterns to detect</span>
<span class="sd">    :param deny_list: A list of words to detect,</span>
<span class="sd">    in case our recognizer uses a predefined list of words (deny list)</span>
<span class="sd">    :param context: list of context words</span>
<span class="sd">    :param deny_list_score: confidence score for a term</span>
<span class="sd">    identified using a deny-list</span>
<span class="sd">    :param global_regex_flags: regex flags to be used in regex matching,</span>
<span class="sd">    including deny-lists.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">supported_entity</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">supported_language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
        <span class="n">patterns</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Pattern</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">deny_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">deny_list_score</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">global_regex_flags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">supported_entity</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Pattern recognizer should be initialized with entity&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">patterns</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">deny_list</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Pattern recognizer should be initialized with patterns&quot;</span>
                <span class="s2">&quot; or with deny list&quot;</span>
            <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">supported_entities</span><span class="o">=</span><span class="p">[</span><span class="n">supported_entity</span><span class="p">],</span>
            <span class="n">supported_language</span><span class="o">=</span><span class="n">supported_language</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">patterns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span> <span class="o">=</span> <span class="n">patterns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deny_list_score</span> <span class="o">=</span> <span class="n">deny_list_score</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_regex_flags</span> <span class="o">=</span> <span class="n">global_regex_flags</span>

        <span class="k">if</span> <span class="n">deny_list</span><span class="p">:</span>
            <span class="n">deny_list_pattern</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deny_list_to_regex</span><span class="p">(</span><span class="n">deny_list</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deny_list_pattern</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deny_list</span> <span class="o">=</span> <span class="n">deny_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deny_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># noqa D102</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NlpArtifacts</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">regex_flags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Analyzes text to detect PII using regular expressions or deny-lists.</span>

<span class="sd">        :param text: Text to be analyzed</span>
<span class="sd">        :param entities: Entities this recognizer can detect</span>
<span class="sd">        :param nlp_artifacts: Output values from the NLP engine</span>
<span class="sd">        :param regex_flags: regex flags to be used in regex matching</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">:</span>
            <span class="n">pattern_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__analyze_patterns</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">regex_flags</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pattern_result</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">_deny_list_to_regex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">deny_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Pattern</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert a list of words to a matching regex.</span>

<span class="sd">        To be analyzed by the analyze method as any other regex patterns.</span>

<span class="sd">        :param deny_list: the list of words to detect</span>
<span class="sd">        :return:the regex of the words for detection</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Escape deny list elements as preparation for regex</span>
        <span class="n">escaped_deny_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">deny_list</span><span class="p">]</span>
        <span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;(?:^|(?&lt;=\W))(&quot;</span> <span class="o">+</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">escaped_deny_list</span><span class="p">)</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;)(?:(?=\W)|$)&quot;</span>
        <span class="k">return</span> <span class="n">Pattern</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;deny_list&quot;</span><span class="p">,</span> <span class="n">regex</span><span class="o">=</span><span class="n">regex</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">deny_list_score</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validate the pattern logic e.g., by running checksum on a detected pattern.</span>

<span class="sd">        :param pattern_text: the text to validated.</span>
<span class="sd">        Only the part in text that was detected by the regex engine</span>
<span class="sd">        :return: A bool indicating whether the validation was successful.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">invalidate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Logic to check for result invalidation by running pruning logic.</span>

<span class="sd">        For example, each SSN number group should not consist of all the same digits.</span>

<span class="sd">        :param pattern_text: the text to validated.</span>
<span class="sd">        Only the part in text that was detected by the regex engine</span>
<span class="sd">        :return: A bool indicating whether the result is invalidated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">build_regex_explanation</span><span class="p">(</span>
        <span class="n">recognizer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pattern_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">original_score</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">validation_result</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">regex_flags</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnalysisExplanation</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct an explanation for why this entity was detected.</span>

<span class="sd">        :param recognizer_name: Name of recognizer detecting the entity</span>
<span class="sd">        :param pattern_name: Regex pattern name which detected the entity</span>
<span class="sd">        :param pattern: Regex pattern logic</span>
<span class="sd">        :param original_score: Score given by the recognizer</span>
<span class="sd">        :param validation_result: Whether validation was used and its result</span>
<span class="sd">        :param regex_flags: Regex flags used in the regex matching</span>
<span class="sd">        :return: Analysis explanation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">explanation</span> <span class="o">=</span> <span class="n">AnalysisExplanation</span><span class="p">(</span>
            <span class="n">recognizer</span><span class="o">=</span><span class="n">recognizer_name</span><span class="p">,</span>
            <span class="n">original_score</span><span class="o">=</span><span class="n">original_score</span><span class="p">,</span>
            <span class="n">pattern_name</span><span class="o">=</span><span class="n">pattern_name</span><span class="p">,</span>
            <span class="n">pattern</span><span class="o">=</span><span class="n">pattern</span><span class="p">,</span>
            <span class="n">validation_result</span><span class="o">=</span><span class="n">validation_result</span><span class="p">,</span>
            <span class="n">regex_flags</span><span class="o">=</span><span class="n">regex_flags</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">explanation</span>

    <span class="k">def</span> <span class="nf">__analyze_patterns</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluate all patterns in the provided text.</span>

<span class="sd">        Including words in the provided deny-list</span>

<span class="sd">        :param text: text to analyze</span>
<span class="sd">        :param flags: regex flags</span>
<span class="sd">        :return: A list of RecognizerResult</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span> <span class="k">if</span> <span class="n">flags</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_regex_flags</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">:</span>
            <span class="n">match_start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">regex</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">flags</span><span class="p">)</span>
            <span class="n">match_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">match_start_time</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;--- match_time[</span><span class="si">%s</span><span class="s2">]: </span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2"> seconds&quot;</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">match_time</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span>
                <span class="n">match_time</span><span class="o">.</span><span class="n">microseconds</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
                <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">span</span><span class="p">()</span>
                <span class="n">current_match</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>

                <span class="c1"># Skip empty results</span>
                <span class="k">if</span> <span class="n">current_match</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="n">score</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">score</span>

                <span class="n">validation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_result</span><span class="p">(</span><span class="n">current_match</span><span class="p">)</span>
                <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_regex_explanation</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">pattern</span><span class="o">.</span><span class="n">regex</span><span class="p">,</span>
                    <span class="n">score</span><span class="p">,</span>
                    <span class="n">validation_result</span><span class="p">,</span>
                    <span class="n">flags</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">pattern_result</span> <span class="o">=</span> <span class="n">RecognizerResult</span><span class="p">(</span>
                    <span class="n">entity_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_entities</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
                    <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">,</span>
                    <span class="n">score</span><span class="o">=</span><span class="n">score</span><span class="p">,</span>
                    <span class="n">analysis_explanation</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
                    <span class="n">recognition_metadata</span><span class="o">=</span><span class="p">{</span>
                        <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_NAME_KEY</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">validation_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">validation_result</span><span class="p">:</span>
                        <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MAX_SCORE</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MIN_SCORE</span>

                <span class="n">invalidation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalidate_result</span><span class="p">(</span><span class="n">current_match</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">invalidation_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">invalidation_result</span><span class="p">:</span>
                    <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MIN_SCORE</span>

                <span class="k">if</span> <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">&gt;</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MIN_SCORE</span><span class="p">:</span>
                    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pattern_result</span><span class="p">)</span>

                <span class="c1"># Update analysis explanation score following validation or invalidation</span>
                <span class="n">description</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span>

        <span class="n">results</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">remove_duplicates</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Serialize instance into a dictionary.&quot;&quot;&quot;</span>
        <span class="n">return_dict</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

        <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;patterns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">pat</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">pat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">]</span>
        <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;deny_list&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deny_list</span>
        <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>
        <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;supported_entity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;supported_entities&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;supported_entities&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">return_dict</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">entity_recognizer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PatternRecognizer&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create instance from a serialized dict.&quot;&quot;&quot;</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="n">entity_recognizer_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;patterns&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">patterns</span><span class="p">:</span>
            <span class="n">patterns_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">Pattern</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">pat</span><span class="p">)</span> <span class="k">for</span> <span class="n">pat</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">]</span>
            <span class="n">entity_recognizer_dict</span><span class="p">[</span><span class="s2">&quot;patterns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">patterns_list</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">entity_recognizer_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.PatternRecognizer.__analyze_patterns" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">__analyze_patterns</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Evaluate all patterns in the provided text.</p>
<p>Including words in the provided deny-list</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>text to analyze</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>flags</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>regex flags</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of RecognizerResult</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__analyze_patterns</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flags</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Evaluate all patterns in the provided text.</span>

<span class="sd">    Including words in the provided deny-list</span>

<span class="sd">    :param text: text to analyze</span>
<span class="sd">    :param flags: regex flags</span>
<span class="sd">    :return: A list of RecognizerResult</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span> <span class="k">if</span> <span class="n">flags</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_regex_flags</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">:</span>
        <span class="n">match_start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">regex</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">flags</span><span class="p">)</span>
        <span class="n">match_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">match_start_time</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;--- match_time[</span><span class="si">%s</span><span class="s2">]: </span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2"> seconds&quot;</span><span class="p">,</span>
            <span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">match_time</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span>
            <span class="n">match_time</span><span class="o">.</span><span class="n">microseconds</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
            <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">span</span><span class="p">()</span>
            <span class="n">current_match</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">]</span>

            <span class="c1"># Skip empty results</span>
            <span class="k">if</span> <span class="n">current_match</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">score</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">score</span>

            <span class="n">validation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_result</span><span class="p">(</span><span class="n">current_match</span><span class="p">)</span>
            <span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_regex_explanation</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">pattern</span><span class="o">.</span><span class="n">regex</span><span class="p">,</span>
                <span class="n">score</span><span class="p">,</span>
                <span class="n">validation_result</span><span class="p">,</span>
                <span class="n">flags</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">pattern_result</span> <span class="o">=</span> <span class="n">RecognizerResult</span><span class="p">(</span>
                <span class="n">entity_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">supported_entities</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span>
                <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">,</span>
                <span class="n">score</span><span class="o">=</span><span class="n">score</span><span class="p">,</span>
                <span class="n">analysis_explanation</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
                <span class="n">recognition_metadata</span><span class="o">=</span><span class="p">{</span>
                    <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_NAME_KEY</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">RecognizerResult</span><span class="o">.</span><span class="n">RECOGNIZER_IDENTIFIER_KEY</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">validation_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">validation_result</span><span class="p">:</span>
                    <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MAX_SCORE</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MIN_SCORE</span>

            <span class="n">invalidation_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">invalidate_result</span><span class="p">(</span><span class="n">current_match</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invalidation_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">invalidation_result</span><span class="p">:</span>
                <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MIN_SCORE</span>

            <span class="k">if</span> <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span> <span class="o">&gt;</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">MIN_SCORE</span><span class="p">:</span>
                <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pattern_result</span><span class="p">)</span>

            <span class="c1"># Update analysis explanation score following validation or invalidation</span>
            <span class="n">description</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">pattern_result</span><span class="o">.</span><span class="n">score</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">EntityRecognizer</span><span class="o">.</span><span class="n">remove_duplicates</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.PatternRecognizer.analyze" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">analyze</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">entities</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">regex_flags</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Analyzes text to detect PII using regular expressions or deny-lists.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Text to be analyzed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>entities</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Entities this recognizer can detect</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>nlp_artifacts</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="presidio_analyzer.nlp_engine.NlpArtifacts">NlpArtifacts</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Output values from the NLP engine</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>regex_flags</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[int]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>regex flags to be used in regex matching</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">NlpArtifacts</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">regex_flags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">RecognizerResult</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Analyzes text to detect PII using regular expressions or deny-lists.</span>

<span class="sd">    :param text: Text to be analyzed</span>
<span class="sd">    :param entities: Entities this recognizer can detect</span>
<span class="sd">    :param nlp_artifacts: Output values from the NLP engine</span>
<span class="sd">    :param regex_flags: regex flags to be used in regex matching</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">:</span>
        <span class="n">pattern_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__analyze_patterns</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">regex_flags</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pattern_result</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.PatternRecognizer.build_regex_explanation" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">build_regex_explanation</span><span class="p">(</span><span class="n">recognizer_name</span><span class="p">,</span> <span class="n">pattern_name</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">original_score</span><span class="p">,</span> <span class="n">validation_result</span><span class="p">,</span> <span class="n">regex_flags</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Construct an explanation for why this entity was detected.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recognizer_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of recognizer detecting the entity</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>pattern_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Regex pattern name which detected the entity</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>pattern</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Regex pattern logic</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>original_score</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Score given by the recognizer</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>validation_result</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Whether validation was used and its result</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>regex_flags</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Regex flags used in the regex matching</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.AnalysisExplanation" href="#presidio_analyzer.AnalysisExplanation">AnalysisExplanation</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Analysis explanation</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">build_regex_explanation</span><span class="p">(</span>
    <span class="n">recognizer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pattern_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">original_score</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">validation_result</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">regex_flags</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnalysisExplanation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct an explanation for why this entity was detected.</span>

<span class="sd">    :param recognizer_name: Name of recognizer detecting the entity</span>
<span class="sd">    :param pattern_name: Regex pattern name which detected the entity</span>
<span class="sd">    :param pattern: Regex pattern logic</span>
<span class="sd">    :param original_score: Score given by the recognizer</span>
<span class="sd">    :param validation_result: Whether validation was used and its result</span>
<span class="sd">    :param regex_flags: Regex flags used in the regex matching</span>
<span class="sd">    :return: Analysis explanation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">explanation</span> <span class="o">=</span> <span class="n">AnalysisExplanation</span><span class="p">(</span>
        <span class="n">recognizer</span><span class="o">=</span><span class="n">recognizer_name</span><span class="p">,</span>
        <span class="n">original_score</span><span class="o">=</span><span class="n">original_score</span><span class="p">,</span>
        <span class="n">pattern_name</span><span class="o">=</span><span class="n">pattern_name</span><span class="p">,</span>
        <span class="n">pattern</span><span class="o">=</span><span class="n">pattern</span><span class="p">,</span>
        <span class="n">validation_result</span><span class="o">=</span><span class="n">validation_result</span><span class="p">,</span>
        <span class="n">regex_flags</span><span class="o">=</span><span class="n">regex_flags</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">explanation</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.PatternRecognizer.from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_dict</span><span class="p">(</span><span class="n">entity_recognizer_dict</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create instance from a serialized dict.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">entity_recognizer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PatternRecognizer&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create instance from a serialized dict.&quot;&quot;&quot;</span>
    <span class="n">patterns</span> <span class="o">=</span> <span class="n">entity_recognizer_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;patterns&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">patterns</span><span class="p">:</span>
        <span class="n">patterns_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">Pattern</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">pat</span><span class="p">)</span> <span class="k">for</span> <span class="n">pat</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">]</span>
        <span class="n">entity_recognizer_dict</span><span class="p">[</span><span class="s2">&quot;patterns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">patterns_list</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">entity_recognizer_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.PatternRecognizer.invalidate_result" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">invalidate_result</span><span class="p">(</span><span class="n">pattern_text</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Logic to check for result invalidation by running pruning logic.</p>
<p>For example, each SSN number group should not consist of all the same digits.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pattern_text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the text to validated. Only the part in text that was detected by the regex engine</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A bool indicating whether the result is invalidated</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">invalidate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Logic to check for result invalidation by running pruning logic.</span>

<span class="sd">    For example, each SSN number group should not consist of all the same digits.</span>

<span class="sd">    :param pattern_text: the text to validated.</span>
<span class="sd">    Only the part in text that was detected by the regex engine</span>
<span class="sd">    :return: A bool indicating whether the result is invalidated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.PatternRecognizer.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Serialize instance into a dictionary.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Serialize instance into a dictionary.&quot;&quot;&quot;</span>
    <span class="n">return_dict</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>

    <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;patterns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">pat</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">pat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">]</span>
    <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;deny_list&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deny_list</span>
    <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;context&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span>
    <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;supported_entity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;supported_entities&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">return_dict</span><span class="p">[</span><span class="s2">&quot;supported_entities&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">return_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.PatternRecognizer.validate_result" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">validate_result</span><span class="p">(</span><span class="n">pattern_text</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Validate the pattern logic e.g., by running checksum on a detected pattern.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>pattern_text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the text to validated. Only the part in text that was detected by the regex engine</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Optional">Optional</span>[bool]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A bool indicating whether the validation was successful.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/pattern_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">validate_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Validate the pattern logic e.g., by running checksum on a detected pattern.</span>

<span class="sd">    :param pattern_text: the text to validated.</span>
<span class="sd">    Only the part in text that was detected by the regex engine</span>
<span class="sd">    :return: A bool indicating whether the validation was successful.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.RecognizerRegistry" class="doc doc-heading">
          <code>RecognizerRegistry</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Detect, register and hold all recognizers to be used by the analyzer.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recognizers</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.Iterable">Iterable</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An optional list of recognizers, that will be available instead of the predefined recognizers</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code></code></td>
          <td>
                <code>global_regex_flags</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>regex flags to be used in regex matching, including deny-lists</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RecognizerRegistry</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Detect, register and hold all recognizers to be used by the analyzer.</span>

<span class="sd">    :param recognizers: An optional list of recognizers,</span>
<span class="sd">    that will be available instead of the predefined recognizers</span>
<span class="sd">    :param global_regex_flags : regex flags to be used in regex matching,</span>
<span class="sd">    including deny-lists</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">recognizers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">global_regex_flags</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">DOTALL</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span> <span class="o">|</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">recognizers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span> <span class="o">=</span> <span class="n">recognizers</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_regex_flags</span> <span class="o">=</span> <span class="n">global_regex_flags</span>

    <span class="k">def</span> <span class="nf">load_predefined_recognizers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">languages</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">nlp_engine</span><span class="p">:</span> <span class="n">NlpEngine</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the existing recognizers into memory.</span>

<span class="sd">        :param languages: List of languages for which to load recognizers</span>
<span class="sd">        :param nlp_engine: The NLP engine to use.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">languages</span><span class="p">:</span>
            <span class="n">languages</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;en&quot;</span><span class="p">]</span>

        <span class="n">nlp_recognizer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nlp_recognizer</span><span class="p">(</span><span class="n">nlp_engine</span><span class="p">)</span>

        <span class="n">recognizers_map</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;en&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">UsBankRecognizer</span><span class="p">,</span>
                <span class="n">UsLicenseRecognizer</span><span class="p">,</span>
                <span class="n">UsItinRecognizer</span><span class="p">,</span>
                <span class="n">UsPassportRecognizer</span><span class="p">,</span>
                <span class="n">UsSsnRecognizer</span><span class="p">,</span>
                <span class="n">NhsRecognizer</span><span class="p">,</span>
                <span class="n">SgFinRecognizer</span><span class="p">,</span>
                <span class="n">AuAbnRecognizer</span><span class="p">,</span>
                <span class="n">AuAcnRecognizer</span><span class="p">,</span>
                <span class="n">AuTfnRecognizer</span><span class="p">,</span>
                <span class="n">AuMedicareRecognizer</span><span class="p">,</span>
                <span class="n">InPanRecognizer</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;es&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">EsNifRecognizer</span><span class="p">],</span>
            <span class="s2">&quot;it&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">ItDriverLicenseRecognizer</span><span class="p">,</span>
                <span class="n">ItFiscalCodeRecognizer</span><span class="p">,</span>
                <span class="n">ItVatCodeRecognizer</span><span class="p">,</span>
                <span class="n">ItIdentityCardRecognizer</span><span class="p">,</span>
                <span class="n">ItPassportRecognizer</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="s2">&quot;pl&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">PlPeselRecognizer</span><span class="p">],</span>
            <span class="s2">&quot;ALL&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="n">CreditCardRecognizer</span><span class="p">,</span>
                <span class="n">CryptoRecognizer</span><span class="p">,</span>
                <span class="n">DateRecognizer</span><span class="p">,</span>
                <span class="n">EmailRecognizer</span><span class="p">,</span>
                <span class="n">IbanRecognizer</span><span class="p">,</span>
                <span class="n">IpRecognizer</span><span class="p">,</span>
                <span class="n">MedicalLicenseRecognizer</span><span class="p">,</span>
                <span class="n">PhoneRecognizer</span><span class="p">,</span>
                <span class="n">UrlRecognizer</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
            <span class="n">lang_recognizers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__instantiate_recognizer</span><span class="p">(</span>
                    <span class="n">recognizer_class</span><span class="o">=</span><span class="n">rc</span><span class="p">,</span> <span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">rc</span> <span class="ow">in</span> <span class="n">recognizers_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">lang_recognizers</span><span class="p">)</span>
            <span class="n">all_recognizers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__instantiate_recognizer</span><span class="p">(</span>
                    <span class="n">recognizer_class</span><span class="o">=</span><span class="n">rc</span><span class="p">,</span> <span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">rc</span> <span class="ow">in</span> <span class="n">recognizers_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">all_recognizers</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nlp_engine</span><span class="p">:</span>
                <span class="n">nlp_recognizer_inst</span> <span class="o">=</span> <span class="n">nlp_recognizer</span><span class="p">(</span>
                    <span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span><span class="p">,</span>
                    <span class="n">supported_entities</span><span class="o">=</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">(),</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nlp_recognizer_inst</span> <span class="o">=</span> <span class="n">nlp_recognizer</span><span class="p">(</span><span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nlp_recognizer_inst</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_nlp_recognizer</span><span class="p">(</span>
        <span class="n">nlp_engine</span><span class="p">:</span> <span class="n">NlpEngine</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">SpacyRecognizer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the recognizer leveraging the selected NLP Engine.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nlp_engine</span><span class="p">,</span> <span class="n">StanzaNlpEngine</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">StanzaRecognizer</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nlp_engine</span><span class="p">,</span> <span class="n">TransformersNlpEngine</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">TransformersRecognizer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">nlp_engine</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nlp_engine</span><span class="p">,</span> <span class="n">SpacyNlpEngine</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">SpacyRecognizer</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;nlp engine should be either SpacyNlpEngine,&quot;</span>
                <span class="s2">&quot;StanzaNlpEngine or TransformersNlpEngine&quot;</span>
            <span class="p">)</span>
            <span class="c1"># Returning default</span>
            <span class="k">return</span> <span class="n">SpacyRecognizer</span>

    <span class="k">def</span> <span class="nf">get_recognizers</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">entities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">all_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ad_hoc_recognizers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of recognizers which supports the specified name and language.</span>

<span class="sd">        :param entities: the requested entities</span>
<span class="sd">        :param language: the requested language</span>
<span class="sd">        :param all_fields: a flag to return all fields of a requested language.</span>
<span class="sd">        :param ad_hoc_recognizers: Additional recognizers provided by the user</span>
<span class="sd">        as part of the request</span>
<span class="sd">        :return: A list of the recognizers which supports the supplied entities</span>
<span class="sd">        and language</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">language</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No language provided&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">entities</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">all_fields</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No entities provided&quot;</span><span class="p">)</span>

        <span class="n">all_possible_recognizers</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ad_hoc_recognizers</span><span class="p">:</span>
            <span class="n">all_possible_recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ad_hoc_recognizers</span><span class="p">)</span>

        <span class="c1"># filter out unwanted recognizers</span>
        <span class="n">to_return</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">all_fields</span><span class="p">:</span>
            <span class="n">to_return</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">rec</span>
                <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">all_possible_recognizers</span>
                <span class="k">if</span> <span class="n">language</span> <span class="o">==</span> <span class="n">rec</span><span class="o">.</span><span class="n">supported_language</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
                <span class="n">subset</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">rec</span>
                    <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">all_possible_recognizers</span>
                    <span class="k">if</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">rec</span><span class="o">.</span><span class="n">supported_entities</span>
                    <span class="ow">and</span> <span class="n">language</span> <span class="o">==</span> <span class="n">rec</span><span class="o">.</span><span class="n">supported_language</span>
                <span class="p">]</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">subset</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="s2">&quot;Entity </span><span class="si">%s</span><span class="s2"> doesn&#39;t have the corresponding&quot;</span>
                        <span class="s2">&quot; recognizer in language : </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">entity</span><span class="p">,</span>
                        <span class="n">language</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">to_return</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">subset</span><span class="p">))</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="s2">&quot;Returning a total of </span><span class="si">%s</span><span class="s2"> recognizers&quot;</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">to_return</span><span class="p">)),</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">to_return</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No matching recognizers were found to serve the request.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">to_return</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_recognizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recognizer</span><span class="p">:</span> <span class="n">EntityRecognizer</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a new recognizer to the list of recognizers.</span>

<span class="sd">        :param recognizer: Recognizer to add</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">recognizer</span><span class="p">,</span> <span class="n">EntityRecognizer</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input is not of type EntityRecognizer&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recognizer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_recognizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recognizer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove a recognizer based on its name.</span>

<span class="sd">        :param recognizer_name: Name of recognizer to remove</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_recognizers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">rec</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">recognizer_name</span>
        <span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Removed </span><span class="si">%s</span><span class="s2"> recognizers which had the name </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_recognizers</span><span class="p">)),</span>
            <span class="n">recognizer_name</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span> <span class="o">=</span> <span class="n">new_recognizers</span>

    <span class="k">def</span> <span class="nf">add_pattern_recognizer_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recognizer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load a pattern recognizer from a Dict into the recognizer registry.</span>

<span class="sd">        :param recognizer_dict: Dict holding a serialization of an PatternRecognizer</span>

<span class="sd">        :example:</span>
<span class="sd">        &gt;&gt;&gt; registry = RecognizerRegistry()</span>
<span class="sd">        &gt;&gt;&gt; recognizer = { &quot;name&quot;: &quot;Titles Recognizer&quot;, &quot;supported_language&quot;: &quot;de&quot;,&quot;supported_entity&quot;: &quot;TITLE&quot;, &quot;deny_list&quot;: [&quot;Mr.&quot;,&quot;Mrs.&quot;]} # noqa: E501</span>
<span class="sd">        &gt;&gt;&gt; registry.add_pattern_recognizer_from_dict(recognizer)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">recognizer</span> <span class="o">=</span> <span class="n">PatternRecognizer</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">recognizer_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_recognizer</span><span class="p">(</span><span class="n">recognizer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_recognizers_from_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yml_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read YAML file and load recognizers into the recognizer registry.</span>

<span class="sd">        See example yaml file here:</span>
<span class="sd">        https://github.com/microsoft/presidio/blob/main/presidio-analyzer/conf/example_recognizers.yaml</span>

<span class="sd">        :example:</span>
<span class="sd">        &gt;&gt;&gt; yaml_file = &quot;recognizers.yaml&quot;</span>
<span class="sd">        &gt;&gt;&gt; registry = RecognizerRegistry()</span>
<span class="sd">        &gt;&gt;&gt; registry.add_recognizers_from_yaml(yaml_file)</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">yml_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">yaml_recognizers</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">yaml_recognizer</span> <span class="ow">in</span> <span class="n">yaml_recognizers</span><span class="p">[</span><span class="s2">&quot;recognizers&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_pattern_recognizer_from_dict</span><span class="p">(</span><span class="n">yaml_recognizer</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">io_error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error reading file </span><span class="si">{</span><span class="n">yml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">io_error</span>
        <span class="k">except</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span> <span class="k">as</span> <span class="n">yaml_error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse file </span><span class="si">{</span><span class="n">yml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">yaml_error</span>
        <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">yaml_error</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse file </span><span class="si">{</span><span class="n">yml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">yaml_error</span>

    <span class="k">def</span> <span class="nf">__instantiate_recognizer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">recognizer_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">],</span> <span class="n">supported_language</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Instantiate a recognizer class given type and input.</span>

<span class="sd">        :param recognizer_class: Class object of the recognizer</span>
<span class="sd">        :param supported_language: Language this recognizer should support</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">inst</span> <span class="o">=</span> <span class="n">recognizer_class</span><span class="p">(</span><span class="n">supported_language</span><span class="o">=</span><span class="n">supported_language</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span> <span class="n">PatternRecognizer</span><span class="p">):</span>
            <span class="n">inst</span><span class="o">.</span><span class="n">global_regex_flags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_regex_flags</span>
        <span class="k">return</span> <span class="n">inst</span>

    <span class="k">def</span> <span class="nf">_get_supported_languages</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">languages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="p">:</span>
            <span class="n">languages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rec</span><span class="o">.</span><span class="n">supported_language</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">languages</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_supported_entities</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">languages</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the supported entities by the set of recognizers loaded.</span>

<span class="sd">        :param languages: The languages to get the supported entities for.</span>
<span class="sd">        If languages=None, returns all entities for all languages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">languages</span><span class="p">:</span>
            <span class="n">languages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_supported_languages</span><span class="p">()</span>

        <span class="n">supported_entities</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">language</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
            <span class="n">recognizers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">all_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">:</span>
                <span class="n">supported_entities</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">recognizer</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">())</span>

        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">supported_entities</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.__instantiate_recognizer" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">__instantiate_recognizer</span><span class="p">(</span><span class="n">recognizer_class</span><span class="p">,</span> <span class="n">supported_language</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Instantiate a recognizer class given type and input.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recognizer_class</code></td>
          <td>
                <code><span title="typing.Type">Type</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Class object of the recognizer</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>supported_language</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Language this recognizer should support</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__instantiate_recognizer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">recognizer_class</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">],</span> <span class="n">supported_language</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Instantiate a recognizer class given type and input.</span>

<span class="sd">    :param recognizer_class: Class object of the recognizer</span>
<span class="sd">    :param supported_language: Language this recognizer should support</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">inst</span> <span class="o">=</span> <span class="n">recognizer_class</span><span class="p">(</span><span class="n">supported_language</span><span class="o">=</span><span class="n">supported_language</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">inst</span><span class="p">,</span> <span class="n">PatternRecognizer</span><span class="p">):</span>
        <span class="n">inst</span><span class="o">.</span><span class="n">global_regex_flags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">global_regex_flags</span>
    <span class="k">return</span> <span class="n">inst</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.add_pattern_recognizer_from_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_pattern_recognizer_from_dict</span><span class="p">(</span><span class="n">recognizer_dict</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Load a pattern recognizer from a Dict into the recognizer registry.</p>
<p>:example:</p>
<blockquote>
<blockquote>
<blockquote>
<p>registry = RecognizerRegistry()
recognizer = { "name": "Titles Recognizer", "supported_language": "de","supported_entity": "TITLE", "deny_list": ["Mr.","Mrs."]} # noqa: E501
registry.add_pattern_recognizer_from_dict(recognizer)</p>
</blockquote>
</blockquote>
</blockquote>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recognizer_dict</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Dict holding a serialization of an PatternRecognizer</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_pattern_recognizer_from_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recognizer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load a pattern recognizer from a Dict into the recognizer registry.</span>

<span class="sd">    :param recognizer_dict: Dict holding a serialization of an PatternRecognizer</span>

<span class="sd">    :example:</span>
<span class="sd">    &gt;&gt;&gt; registry = RecognizerRegistry()</span>
<span class="sd">    &gt;&gt;&gt; recognizer = { &quot;name&quot;: &quot;Titles Recognizer&quot;, &quot;supported_language&quot;: &quot;de&quot;,&quot;supported_entity&quot;: &quot;TITLE&quot;, &quot;deny_list&quot;: [&quot;Mr.&quot;,&quot;Mrs.&quot;]} # noqa: E501</span>
<span class="sd">    &gt;&gt;&gt; registry.add_pattern_recognizer_from_dict(recognizer)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">recognizer</span> <span class="o">=</span> <span class="n">PatternRecognizer</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">recognizer_dict</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_recognizer</span><span class="p">(</span><span class="n">recognizer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.add_recognizer" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_recognizer</span><span class="p">(</span><span class="n">recognizer</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add a new recognizer to the list of recognizers.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recognizer</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Recognizer to add</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_recognizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recognizer</span><span class="p">:</span> <span class="n">EntityRecognizer</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a new recognizer to the list of recognizers.</span>

<span class="sd">    :param recognizer: Recognizer to add</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">recognizer</span><span class="p">,</span> <span class="n">EntityRecognizer</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Input is not of type EntityRecognizer&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recognizer</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.add_recognizers_from_yaml" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">add_recognizers_from_yaml</span><span class="p">(</span><span class="n">yml_path</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Read YAML file and load recognizers into the recognizer registry.</p>
<p>See example yaml file here:
https://github.com/microsoft/presidio/blob/main/presidio-analyzer/conf/example_recognizers.yaml</p>
<p>:example:</p>
<blockquote>
<blockquote>
<blockquote>
<p>yaml_file = "recognizers.yaml"
registry = RecognizerRegistry()
registry.add_recognizers_from_yaml(yaml_file)</p>
</blockquote>
</blockquote>
</blockquote>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_recognizers_from_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yml_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read YAML file and load recognizers into the recognizer registry.</span>

<span class="sd">    See example yaml file here:</span>
<span class="sd">    https://github.com/microsoft/presidio/blob/main/presidio-analyzer/conf/example_recognizers.yaml</span>

<span class="sd">    :example:</span>
<span class="sd">    &gt;&gt;&gt; yaml_file = &quot;recognizers.yaml&quot;</span>
<span class="sd">    &gt;&gt;&gt; registry = RecognizerRegistry()</span>
<span class="sd">    &gt;&gt;&gt; registry.add_recognizers_from_yaml(yaml_file)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">yml_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">yaml_recognizers</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">yaml_recognizer</span> <span class="ow">in</span> <span class="n">yaml_recognizers</span><span class="p">[</span><span class="s2">&quot;recognizers&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_pattern_recognizer_from_dict</span><span class="p">(</span><span class="n">yaml_recognizer</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">io_error</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error reading file </span><span class="si">{</span><span class="n">yml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">io_error</span>
    <span class="k">except</span> <span class="n">yaml</span><span class="o">.</span><span class="n">YAMLError</span> <span class="k">as</span> <span class="n">yaml_error</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse file </span><span class="si">{</span><span class="n">yml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">yaml_error</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">yaml_error</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to parse file </span><span class="si">{</span><span class="n">yml_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">yaml_error</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.get_recognizers" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="p">,</span> <span class="n">entities</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">all_fields</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ad_hoc_recognizers</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of recognizers which supports the specified name and language.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>entities</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the requested entities</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>language</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the requested language</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>all_fields</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a flag to return all fields of a requested language.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>ad_hoc_recognizers</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Additional recognizers provided by the user as part of the request</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of the recognizers which supports the supplied entities and language</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_recognizers</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">entities</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">all_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">ad_hoc_recognizers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">EntityRecognizer</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a list of recognizers which supports the specified name and language.</span>

<span class="sd">    :param entities: the requested entities</span>
<span class="sd">    :param language: the requested language</span>
<span class="sd">    :param all_fields: a flag to return all fields of a requested language.</span>
<span class="sd">    :param ad_hoc_recognizers: Additional recognizers provided by the user</span>
<span class="sd">    as part of the request</span>
<span class="sd">    :return: A list of the recognizers which supports the supplied entities</span>
<span class="sd">    and language</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">language</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No language provided&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">entities</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">all_fields</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No entities provided&quot;</span><span class="p">)</span>

    <span class="n">all_possible_recognizers</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ad_hoc_recognizers</span><span class="p">:</span>
        <span class="n">all_possible_recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ad_hoc_recognizers</span><span class="p">)</span>

    <span class="c1"># filter out unwanted recognizers</span>
    <span class="n">to_return</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">all_fields</span><span class="p">:</span>
        <span class="n">to_return</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">rec</span>
            <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">all_possible_recognizers</span>
            <span class="k">if</span> <span class="n">language</span> <span class="o">==</span> <span class="n">rec</span><span class="o">.</span><span class="n">supported_language</span>
        <span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">entities</span><span class="p">:</span>
            <span class="n">subset</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">rec</span>
                <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">all_possible_recognizers</span>
                <span class="k">if</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">rec</span><span class="o">.</span><span class="n">supported_entities</span>
                <span class="ow">and</span> <span class="n">language</span> <span class="o">==</span> <span class="n">rec</span><span class="o">.</span><span class="n">supported_language</span>
            <span class="p">]</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">subset</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Entity </span><span class="si">%s</span><span class="s2"> doesn&#39;t have the corresponding&quot;</span>
                    <span class="s2">&quot; recognizer in language : </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">entity</span><span class="p">,</span>
                    <span class="n">language</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">to_return</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">subset</span><span class="p">))</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="s2">&quot;Returning a total of </span><span class="si">%s</span><span class="s2"> recognizers&quot;</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">to_return</span><span class="p">)),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">to_return</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No matching recognizers were found to serve the request.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">to_return</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.get_supported_entities" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_supported_entities</span><span class="p">(</span><span class="n">languages</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return the supported entities by the set of recognizers loaded.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>languages</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The languages to get the supported entities for. If languages=None, returns all entities for all languages.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_supported_entities</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">languages</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the supported entities by the set of recognizers loaded.</span>

<span class="sd">    :param languages: The languages to get the supported entities for.</span>
<span class="sd">    If languages=None, returns all entities for all languages.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">languages</span><span class="p">:</span>
        <span class="n">languages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_supported_languages</span><span class="p">()</span>

    <span class="n">supported_entities</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">language</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
        <span class="n">recognizers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_recognizers</span><span class="p">(</span><span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">all_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">recognizer</span> <span class="ow">in</span> <span class="n">recognizers</span><span class="p">:</span>
            <span class="n">supported_entities</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">recognizer</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">())</span>

    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">supported_entities</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.load_predefined_recognizers" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">load_predefined_recognizers</span><span class="p">(</span><span class="n">languages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nlp_engine</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Load the existing recognizers into memory.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>languages</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[str]]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of languages for which to load recognizers</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>nlp_engine</code></td>
          <td>
                <code><span title="presidio_analyzer.nlp_engine.NlpEngine">NlpEngine</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The NLP engine to use.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>None</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_predefined_recognizers</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">languages</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">nlp_engine</span><span class="p">:</span> <span class="n">NlpEngine</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load the existing recognizers into memory.</span>

<span class="sd">    :param languages: List of languages for which to load recognizers</span>
<span class="sd">    :param nlp_engine: The NLP engine to use.</span>
<span class="sd">    :return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">languages</span><span class="p">:</span>
        <span class="n">languages</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;en&quot;</span><span class="p">]</span>

    <span class="n">nlp_recognizer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_nlp_recognizer</span><span class="p">(</span><span class="n">nlp_engine</span><span class="p">)</span>

    <span class="n">recognizers_map</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;en&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">UsBankRecognizer</span><span class="p">,</span>
            <span class="n">UsLicenseRecognizer</span><span class="p">,</span>
            <span class="n">UsItinRecognizer</span><span class="p">,</span>
            <span class="n">UsPassportRecognizer</span><span class="p">,</span>
            <span class="n">UsSsnRecognizer</span><span class="p">,</span>
            <span class="n">NhsRecognizer</span><span class="p">,</span>
            <span class="n">SgFinRecognizer</span><span class="p">,</span>
            <span class="n">AuAbnRecognizer</span><span class="p">,</span>
            <span class="n">AuAcnRecognizer</span><span class="p">,</span>
            <span class="n">AuTfnRecognizer</span><span class="p">,</span>
            <span class="n">AuMedicareRecognizer</span><span class="p">,</span>
            <span class="n">InPanRecognizer</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;es&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">EsNifRecognizer</span><span class="p">],</span>
        <span class="s2">&quot;it&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">ItDriverLicenseRecognizer</span><span class="p">,</span>
            <span class="n">ItFiscalCodeRecognizer</span><span class="p">,</span>
            <span class="n">ItVatCodeRecognizer</span><span class="p">,</span>
            <span class="n">ItIdentityCardRecognizer</span><span class="p">,</span>
            <span class="n">ItPassportRecognizer</span><span class="p">,</span>
        <span class="p">],</span>
        <span class="s2">&quot;pl&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">PlPeselRecognizer</span><span class="p">],</span>
        <span class="s2">&quot;ALL&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">CreditCardRecognizer</span><span class="p">,</span>
            <span class="n">CryptoRecognizer</span><span class="p">,</span>
            <span class="n">DateRecognizer</span><span class="p">,</span>
            <span class="n">EmailRecognizer</span><span class="p">,</span>
            <span class="n">IbanRecognizer</span><span class="p">,</span>
            <span class="n">IpRecognizer</span><span class="p">,</span>
            <span class="n">MedicalLicenseRecognizer</span><span class="p">,</span>
            <span class="n">PhoneRecognizer</span><span class="p">,</span>
            <span class="n">UrlRecognizer</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">languages</span><span class="p">:</span>
        <span class="n">lang_recognizers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__instantiate_recognizer</span><span class="p">(</span>
                <span class="n">recognizer_class</span><span class="o">=</span><span class="n">rc</span><span class="p">,</span> <span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">rc</span> <span class="ow">in</span> <span class="n">recognizers_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">lang_recognizers</span><span class="p">)</span>
        <span class="n">all_recognizers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__instantiate_recognizer</span><span class="p">(</span>
                <span class="n">recognizer_class</span><span class="o">=</span><span class="n">rc</span><span class="p">,</span> <span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">rc</span> <span class="ow">in</span> <span class="n">recognizers_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ALL&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">all_recognizers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nlp_engine</span><span class="p">:</span>
            <span class="n">nlp_recognizer_inst</span> <span class="o">=</span> <span class="n">nlp_recognizer</span><span class="p">(</span>
                <span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span><span class="p">,</span>
                <span class="n">supported_entities</span><span class="o">=</span><span class="n">nlp_engine</span><span class="o">.</span><span class="n">get_supported_entities</span><span class="p">(),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nlp_recognizer_inst</span> <span class="o">=</span> <span class="n">nlp_recognizer</span><span class="p">(</span><span class="n">supported_language</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nlp_recognizer_inst</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerRegistry.remove_recognizer" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">remove_recognizer</span><span class="p">(</span><span class="n">recognizer_name</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Remove a recognizer based on its name.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>recognizer_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of recognizer to remove</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_registry.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">remove_recognizer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">recognizer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove a recognizer based on its name.</span>

<span class="sd">    :param recognizer_name: Name of recognizer to remove</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_recognizers</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">rec</span> <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span> <span class="k">if</span> <span class="n">rec</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">recognizer_name</span>
    <span class="p">]</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Removed </span><span class="si">%s</span><span class="s2"> recognizers which had the name </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_recognizers</span><span class="p">)),</span>
        <span class="n">recognizer_name</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recognizers</span> <span class="o">=</span> <span class="n">new_recognizers</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.RecognizerResult" class="doc doc-heading">
          <code>RecognizerResult</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Recognizer Result represents the findings of the detected entity.</p>
<p>Result of a recognizer analyzing the text.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>entity_type</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the type of the entity</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the start location of the detected entity</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end</code></td>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the end location of the detected entity</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>score</code></td>
          <td>
                <code>float</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the score of the detection</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>analysis_explanation</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.AnalysisExplanation" href="#presidio_analyzer.AnalysisExplanation">AnalysisExplanation</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>contains the explanation of why this entity was identified</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>recognition_metadata</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary of metadata to be used in recognizer specific cases, for example specific recognized context words and recognizer name</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RecognizerResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Recognizer Result represents the findings of the detected entity.</span>

<span class="sd">    Result of a recognizer analyzing the text.</span>

<span class="sd">    :param entity_type: the type of the entity</span>
<span class="sd">    :param start: the start location of the detected entity</span>
<span class="sd">    :param end: the end location of the detected entity</span>
<span class="sd">    :param score: the score of the detection</span>
<span class="sd">    :param analysis_explanation: contains the explanation of why this</span>
<span class="sd">                                 entity was identified</span>
<span class="sd">    :param recognition_metadata: a dictionary of metadata to be used in</span>
<span class="sd">    recognizer specific cases, for example specific recognized context words</span>
<span class="sd">    and recognizer name</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Keys for recognizer metadata</span>
    <span class="n">RECOGNIZER_NAME_KEY</span> <span class="o">=</span> <span class="s2">&quot;recognizer_name&quot;</span>
    <span class="n">RECOGNIZER_IDENTIFIER_KEY</span> <span class="o">=</span> <span class="s2">&quot;recognizer_identifier&quot;</span>

    <span class="c1"># Key of a flag inside recognition_metadata dictionary</span>
    <span class="c1"># which is set to true if the result enhanced by context</span>
    <span class="n">IS_SCORE_ENHANCED_BY_CONTEXT_KEY</span> <span class="o">=</span> <span class="s2">&quot;is_score_enhanced_by_context&quot;</span>

    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;presidio-analyzer&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">end</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">score</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">analysis_explanation</span><span class="p">:</span> <span class="n">AnalysisExplanation</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">recognition_metadata</span><span class="p">:</span> <span class="n">Dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">=</span> <span class="n">entity_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="n">end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">=</span> <span class="n">score</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_explanation</span> <span class="o">=</span> <span class="n">analysis_explanation</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">recognition_metadata</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;recognition_metadata should be passed, &quot;</span>
                <span class="s2">&quot;containing a recognizer_name value&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recognition_metadata</span> <span class="o">=</span> <span class="n">recognition_metadata</span>

    <span class="k">def</span> <span class="nf">append_analysis_explanation_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add text to the analysis explanation.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="o">.</span><span class="n">append_textual_explanation_line</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize self to dictionary.</span>

<span class="sd">        :return: a dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create RecognizerResult from json.</span>

<span class="sd">        :param data: e.g. {</span>
<span class="sd">            &quot;start&quot;: 24,</span>
<span class="sd">            &quot;end&quot;: 32,</span>
<span class="sd">            &quot;score&quot;: 0.8,</span>
<span class="sd">            &quot;entity_type&quot;: &quot;NAME&quot;</span>
<span class="sd">        }</span>
<span class="sd">        :return: RecognizerResult</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">)</span>
        <span class="n">entity_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entity_type&quot;</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">entity_type</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if self intersects with a different RecognizerResult.</span>

<span class="sd">        :return: If intersecting, returns the number of</span>
<span class="sd">        intersecting characters.</span>
<span class="sd">        If not, returns 0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if they do not overlap the intersection is 0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="c1"># otherwise the intersection is min(end) - max(start)</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="o">-</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">contained_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if self is contained in a different RecognizerResult.</span>

<span class="sd">        :return: true if contained</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>

    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if one result is contained or equal to another result.</span>

<span class="sd">        :param other: another RecognizerResult</span>
<span class="sd">        :return: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>

    <span class="k">def</span> <span class="nf">equal_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the indices are equal between two results.</span>

<span class="sd">        :param other: another RecognizerResult</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>

    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if one result is greater by using the results indices in the text.</span>

<span class="sd">        :param other: another RecognizerResult</span>
<span class="sd">        :return: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check two results are equal by using all class fields.</span>

<span class="sd">        :param other: another RecognizerResult</span>
<span class="sd">        :return: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">equal_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">entity_type</span>
        <span class="n">equal_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">score</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">equal_indices</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">and</span> <span class="n">equal_type</span> <span class="ow">and</span> <span class="n">equal_score</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hash the result data by using all class fields.</span>

<span class="sd">        :return: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string representation of the instance.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;start: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;end: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;score: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">has_conflict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if two recognizer results are conflicted or not.</span>

<span class="sd">        I have a conflict if:</span>
<span class="sd">        1. My indices are the same as the other and my score is lower.</span>
<span class="sd">        2. If my indices are contained in another.</span>

<span class="sd">        :param other: RecognizerResult</span>
<span class="sd">        :return:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">equal_indices</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">score</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.__eq__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check two results are equal by using all class fields.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>other</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.recognizer_result.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>another RecognizerResult</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>bool</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check two results are equal by using all class fields.</span>

<span class="sd">    :param other: another RecognizerResult</span>
<span class="sd">    :return: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">equal_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity_type</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">entity_type</span>
    <span class="n">equal_score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">score</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">equal_indices</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="ow">and</span> <span class="n">equal_type</span> <span class="ow">and</span> <span class="n">equal_score</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.__gt__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__gt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if one result is greater by using the results indices in the text.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>other</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.recognizer_result.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>another RecognizerResult</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>bool</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if one result is greater by using the results indices in the text.</span>

<span class="sd">    :param other: another RecognizerResult</span>
<span class="sd">    :return: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.__hash__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__hash__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Hash the result data by using all class fields.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>int</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hash the result data by using all class fields.</span>

<span class="sd">    :return: int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.__repr__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__repr__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a string representation of the instance.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the instance.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.__str__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Return a string representation of the instance.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a string representation of the instance.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;type: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">entity_type</span><span class="si">}</span><span class="s2">, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;start: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s2">, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;end: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="si">}</span><span class="s2">, &quot;</span>
        <span class="sa">f</span><span class="s2">&quot;score: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">score</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.append_analysis_explanation_text" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">append_analysis_explanation_text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add text to the analysis explanation.</p>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">append_analysis_explanation_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add text to the analysis explanation.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analysis_explanation</span><span class="o">.</span><span class="n">append_textual_explanation_line</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.contained_in" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">contained_in</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if self is contained in a different RecognizerResult.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>true if contained</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">contained_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if self is contained in a different RecognizerResult.</span>

<span class="sd">    :return: true if contained</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.contains" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">contains</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if one result is contained or equal to another result.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>other</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.recognizer_result.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>another RecognizerResult</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>bool</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if one result is contained or equal to another result.</span>

<span class="sd">    :param other: another RecognizerResult</span>
<span class="sd">    :return: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.equal_indices" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">equal_indices</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if the indices are equal between two results.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>other</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.recognizer_result.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>another RecognizerResult</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">equal_indices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the indices are equal between two results.</span>

<span class="sd">    :param other: another RecognizerResult</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.from_json" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">from_json</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create RecognizerResult from json.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>data</code></td>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>e.g. { "start": 24, "end": 32, "score": 0.8, "entity_type": "NAME" }</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.recognizer_result.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>RecognizerResult</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create RecognizerResult from json.</span>

<span class="sd">    :param data: e.g. {</span>
<span class="sd">        &quot;start&quot;: 24,</span>
<span class="sd">        &quot;end&quot;: 32,</span>
<span class="sd">        &quot;score&quot;: 0.8,</span>
<span class="sd">        &quot;entity_type&quot;: &quot;NAME&quot;</span>
<span class="sd">    }</span>
<span class="sd">    :return: RecognizerResult</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;score&quot;</span><span class="p">)</span>
    <span class="n">entity_type</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entity_type&quot;</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">entity_type</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.has_conflict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">has_conflict</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if two recognizer results are conflicted or not.</p>
<p>I have a conflict if:
1. My indices are the same as the other and my score is lower.
2. If my indices are contained in another.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>other</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="presidio_analyzer.recognizer_result.RecognizerResult" href="#presidio_analyzer.RecognizerResult">RecognizerResult</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>RecognizerResult</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">has_conflict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if two recognizer results are conflicted or not.</span>

<span class="sd">    I have a conflict if:</span>
<span class="sd">    1. My indices are the same as the other and my score is lower.</span>
<span class="sd">    2. If my indices are contained in another.</span>

<span class="sd">    :param other: RecognizerResult</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">equal_indices</span><span class="p">(</span><span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">score</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">score</span>
    <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.intersects" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">intersects</span><span class="p">(</span><span class="n">other</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Check if self intersects with a different RecognizerResult.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>int</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If intersecting, returns the number of intersecting characters. If not, returns 0</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">intersects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;RecognizerResult&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if self intersects with a different RecognizerResult.</span>

<span class="sd">    :return: If intersecting, returns the number of</span>
<span class="sd">    intersecting characters.</span>
<span class="sd">    If not, returns 0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># if they do not overlap the intersection is 0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>

    <span class="c1"># otherwise the intersection is min(end) - max(start)</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">end</span><span class="p">)</span> <span class="o">-</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RecognizerResult.to_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Serialize self to dictionary.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="typing.Dict">Dict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a dictionary</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/recognizer_result.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serialize self to dictionary.</span>

<span class="sd">    :return: a dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>

<div class="doc doc-object doc-class">



<h2 id="presidio_analyzer.RemoteRecognizer" class="doc doc-heading">
          <code>RemoteRecognizer</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="abc.ABC">ABC</span></code>, <code><a class="autorefs autorefs-internal" title="presidio_analyzer.EntityRecognizer" href="#presidio_analyzer.EntityRecognizer">EntityRecognizer</a></code></p>

  
      <p>A configuration for a recognizer that runs on a different process / remote machine.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>supported_entities</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of entities this recognizer can identify</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>name</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>name of recognizer</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>supported_language</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The language this recognizer can detect entities in</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>version</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Version of this recognizer</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>presidio_analyzer/remote_recognizer.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RemoteRecognizer</span><span class="p">(</span><span class="n">ABC</span><span class="p">,</span> <span class="n">EntityRecognizer</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A configuration for a recognizer that runs on a different process / remote machine.</span>

<span class="sd">    :param supported_entities: A list of entities this recognizer can identify</span>
<span class="sd">    :param name: name of recognizer</span>
<span class="sd">    :param supported_language: The language this recognizer can detect entities in</span>
<span class="sd">    :param version: Version of this recognizer</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">supported_entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">supported_language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">version</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">supported_entities</span><span class="o">=</span><span class="n">supported_entities</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">supported_language</span><span class="o">=</span><span class="n">supported_language</span><span class="p">,</span>
            <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span>
            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># noqa D102</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span>
    <span class="p">):</span>  <span class="c1"># noqa ANN201</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call an external service for PII detection.</span>

<span class="sd">        :param text: text to be analyzed</span>
<span class="sd">        :param entities: Entities that should be looked for</span>
<span class="sd">        :param nlp_artifacts: Additional metadata from the NLP engine</span>
<span class="sd">        :return: List of identified PII entities</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># 1. Call the external service.</span>
        <span class="c1"># 2. Translate results into List[RecognizerResult]</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_supported_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>  <span class="c1"># noqa D102</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="presidio_analyzer.RemoteRecognizer.analyze" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">analyze</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">entities</span><span class="p">,</span> <span class="n">nlp_artifacts</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Call an external service for PII detection.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>text</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>text to be analyzed</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>entities</code></td>
          <td>
                <code><span title="typing.List">List</span>[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Entities that should be looked for</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>nlp_artifacts</code></td>
          <td>
                <code><span title="presidio_analyzer.nlp_engine.NlpArtifacts">NlpArtifacts</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Additional metadata from the NLP engine</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of identified PII entities</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>presidio_analyzer/remote_recognizer.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span> <span class="nf">analyze</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entities</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">nlp_artifacts</span><span class="p">:</span> <span class="n">NlpArtifacts</span>
<span class="p">):</span>  <span class="c1"># noqa ANN201</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Call an external service for PII detection.</span>

<span class="sd">    :param text: text to be analyzed</span>
<span class="sd">    :param entities: Entities that should be looked for</span>
<span class="sd">    :param nlp_artifacts: Additional metadata from the NLP engine</span>
<span class="sd">    :return: List of identified PII entities</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># 1. Call the external service.</span>
    <span class="c1"># 2. Translate results into List[RecognizerResult]</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>


</div>




  </div>

  </div>

</div>












                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/microsoft/presidio" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/_/microsoft-presidio" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:presidio@microsoft.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l217.6 163.2c11.4 8.5 27 8.5 38.4 0l217.6-163.2c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48H48zM0 176v208c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V176L294.4 339.2a63.9 63.9 0 0 1-76.8 0L0 176z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.c011b7c0.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.7389ff0e.min.js"></script>
      
    
  </body>
</html>